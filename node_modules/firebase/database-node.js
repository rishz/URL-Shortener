/*! @license Firebase v3.9.0
Build: rev-cc77c9e
Terms: https://firebase.google.com/terms/

---

typedarray.js
Copyright (c) 2010, Linden Research, Inc.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE. */

(function() {
  var firebase = require('./app-node');
  var h,aa=this;function n(a){return void 0!==a}function ba(){}function ca(a){a.Tb=function(){return a.Ve?a.Ve:a.Ve=new a}}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ea(a){return"array"==da(a)}function fa(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function p(a){return"string"==typeof a}function ga(a){return"number"==typeof a}function ha(a){return"function"==da(a)}function ia(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function ja(a,b,c){return a.call.apply(a.bind,arguments)}
function ka(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function q(a,b,c){q=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ja:ka;return q.apply(null,arguments)}
function la(a,b){function c(){}c.prototype=b.prototype;a.Bg=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.vg=function(a,c,f){for(var g=Array(arguments.length-2),k=2;k<arguments.length;k++)g[k-2]=arguments[k];return b.prototype[c].apply(a,g)}};function ma(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);}function na(){this.Dd=void 0}
function oa(a,b,c){switch(typeof b){case "string":pa(b,c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case "boolean":c.push(b);break;case "undefined":c.push("null");break;case "object":if(null==b){c.push("null");break}if(ea(b)){var d=b.length;c.push("[");for(var e="",f=0;f<d;f++)c.push(e),e=b[f],oa(a,a.Dd?a.Dd.call(b,String(f),e):e,c),e=",";c.push("]");break}c.push("{");d="";for(f in b)Object.prototype.hasOwnProperty.call(b,f)&&(e=b[f],"function"!=typeof e&&(c.push(d),pa(f,c),
c.push(":"),oa(a,a.Dd?a.Dd.call(b,f,e):e,c),d=","));c.push("}");break;case "function":break;default:throw Error("Unknown type: "+typeof b);}}var qa={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},ra=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;
function pa(a,b){b.push('"',a.replace(ra,function(a){if(a in qa)return qa[a];var b=a.charCodeAt(0),e="\\u";16>b?e+="000":256>b?e+="00":4096>b&&(e+="0");return qa[a]=e+b.toString(16)}),'"')};function sa(){this.Va=-1};function ta(){this.Va=-1;this.Va=64;this.M=[];this.Sd=[];this.zf=[];this.xd=[];this.xd[0]=128;for(var a=1;a<this.Va;++a)this.xd[a]=0;this.Md=this.Yb=0;this.reset()}la(ta,sa);ta.prototype.reset=function(){this.M[0]=1732584193;this.M[1]=4023233417;this.M[2]=2562383102;this.M[3]=271733878;this.M[4]=3285377520;this.Md=this.Yb=0};
function ua(a,b,c){c||(c=0);var d=a.zf;if(p(b))for(var e=0;16>e;e++)d[e]=b.charCodeAt(c)<<24|b.charCodeAt(c+1)<<16|b.charCodeAt(c+2)<<8|b.charCodeAt(c+3),c+=4;else for(e=0;16>e;e++)d[e]=b[c]<<24|b[c+1]<<16|b[c+2]<<8|b[c+3],c+=4;for(e=16;80>e;e++){var f=d[e-3]^d[e-8]^d[e-14]^d[e-16];d[e]=(f<<1|f>>>31)&4294967295}b=a.M[0];c=a.M[1];for(var g=a.M[2],k=a.M[3],m=a.M[4],l,e=0;80>e;e++)40>e?20>e?(f=k^c&(g^k),l=1518500249):(f=c^g^k,l=1859775393):60>e?(f=c&g|k&(c|g),l=2400959708):(f=c^g^k,l=3395469782),f=(b<<
5|b>>>27)+f+m+l+d[e]&4294967295,m=k,k=g,g=(c<<30|c>>>2)&4294967295,c=b,b=f;a.M[0]=a.M[0]+b&4294967295;a.M[1]=a.M[1]+c&4294967295;a.M[2]=a.M[2]+g&4294967295;a.M[3]=a.M[3]+k&4294967295;a.M[4]=a.M[4]+m&4294967295}
ta.prototype.update=function(a,b){if(null!=a){n(b)||(b=a.length);for(var c=b-this.Va,d=0,e=this.Sd,f=this.Yb;d<b;){if(0==f)for(;d<=c;)ua(this,a,d),d+=this.Va;if(p(a))for(;d<b;){if(e[f]=a.charCodeAt(d),++f,++d,f==this.Va){ua(this,e);f=0;break}}else for(;d<b;)if(e[f]=a[d],++f,++d,f==this.Va){ua(this,e);f=0;break}}this.Yb=f;this.Md+=b}};var t;a:{var va=aa.navigator;if(va){var wa=va.userAgent;if(wa){t=wa;break a}}t=""};var u=Array.prototype,xa=u.indexOf?function(a,b,c){return u.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(p(a))return p(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ya=u.forEach?function(a,b,c){u.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=p(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},za=u.filter?function(a,b,c){return u.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,g=p(a)?
a.split(""):a,k=0;k<d;k++)if(k in g){var m=g[k];b.call(c,m,k,a)&&(e[f++]=m)}return e},Aa=u.map?function(a,b,c){return u.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=p(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e},Ba=u.reduce?function(a,b,c,d){for(var e=[],f=1,g=arguments.length;f<g;f++)e.push(arguments[f]);d&&(e[0]=q(b,d));return u.reduce.apply(a,e)}:function(a,b,c,d){var e=c;ya(a,function(c,g){e=b.call(d,e,c,g,a)});return e},Ca=u.every?function(a,b,
c){return u.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=p(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return!1;return!0};function Da(a,b){var c=Ea(a,b,void 0);return 0>c?null:p(a)?a.charAt(c):a[c]}function Ea(a,b,c){for(var d=a.length,e=p(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1}function Fa(a,b){var c=xa(a,b);0<=c&&u.splice.call(a,c,1)}function Ga(a,b){a.sort(b||Ha)}function Ha(a,b){return a>b?1:a<b?-1:0};function v(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function Ia(a,b){var c={},d;for(d in a)c[d]=b.call(void 0,a[d],d,a);return c}function Ja(a,b){for(var c in a)if(!b.call(void 0,a[c],c,a))return!1;return!0}function Ka(a){var b=0,c;for(c in a)b++;return b}function La(a){for(var b in a)return b}function Ma(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function Na(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function Oa(a,b){for(var c in a)if(a[c]==b)return!0;return!1}
function Pa(a,b,c){for(var d in a)if(b.call(c,a[d],d,a))return d}function Qa(a,b){var c=Pa(a,b,void 0);return c&&a[c]}function Ra(a){for(var b in a)return!1;return!0}function Sa(a){var b={},c;for(c in a)b[c]=a[c];return b};var Ta=-1!=t.indexOf("Opera")||-1!=t.indexOf("OPR"),Ua=-1!=t.indexOf("Trident")||-1!=t.indexOf("MSIE"),Va=-1!=t.indexOf("Gecko")&&-1==t.toLowerCase().indexOf("webkit")&&!(-1!=t.indexOf("Trident")||-1!=t.indexOf("MSIE")),Wa=-1!=t.toLowerCase().indexOf("webkit");
(function(){var a="",b;if(Ta&&aa.opera)return a=aa.opera.version,ha(a)?a():a;Va?b=/rv\:([^\);]+)(\)|;)/:Ua?b=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:Wa&&(b=/WebKit\/(\S+)/);b&&(a=(a=b.exec(t))?a[1]:"");return Ua&&(b=(b=aa.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a})();var Xa=null,Ya=null;
function Za(a,b){if(!fa(a))throw Error("encodeByteArray takes an array as a parameter");if(!Xa){Xa={};Ya={};for(var c=0;65>c;c++)Xa[c]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c),Ya[c]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(c)}for(var c=b?Ya:Xa,d=[],e=0;e<a.length;e+=3){var f=a[e],g=e+1<a.length,k=g?a[e+1]:0,m=e+2<a.length,l=m?a[e+2]:0,r=f>>2,f=(f&3)<<4|k>>4,k=(k&15)<<2|l>>6,l=l&63;m||(l=64,g||(k=64));d.push(c[r],c[f],c[k],c[l])}return d.join("")}
;function $a(a,b){if(!a)throw ab(b);}function ab(a){return Error("Firebase Database ("+firebase.SDK_VERSION+") INTERNAL ASSERT FAILED: "+a)};function bb(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function w(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]}function cb(a,b){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b(c,a[c])};function db(a){var b=[];cb(a,function(a,d){ea(d)?ya(d,function(d){b.push(encodeURIComponent(a)+"="+encodeURIComponent(d))}):b.push(encodeURIComponent(a)+"="+encodeURIComponent(d))});return b.length?"&"+b.join("&"):""};var eb=firebase.Promise;function fb(){var a=this;this.reject=this.resolve=null;this.ra=new eb(function(b,c){a.resolve=b;a.reject=c})}function gb(a,b){return function(c,d){c?a.reject(c):a.resolve(d);ha(b)&&(hb(a.ra),1===b.length?b(c):b(c,d))}}function hb(a){a.then(void 0,ba)};function ib(a){return"undefined"!==typeof JSON&&n(JSON.parse)?JSON.parse(a):ma(a)}function x(a){if("undefined"!==typeof JSON&&n(JSON.stringify))a=JSON.stringify(a);else{var b=[];oa(new na,a,b);a=b.join("")}return a};function jb(a){for(var b=[],c=0,d=0;d<a.length;d++){var e=a.charCodeAt(d);55296<=e&&56319>=e&&(e-=55296,d++,$a(d<a.length,"Surrogate pair missing trail surrogate."),e=65536+(e<<10)+(a.charCodeAt(d)-56320));128>e?b[c++]=e:(2048>e?b[c++]=e>>6|192:(65536>e?b[c++]=e>>12|224:(b[c++]=e>>18|240,b[c++]=e>>12&63|128),b[c++]=e>>6&63|128),b[c++]=e&63|128)}return b}function kb(a){for(var b=0,c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b++:2048>d?b+=2:55296<=d&&56319>=d?(b+=4,c++):b+=3}return b};function z(a,b,c,d){var e;d<b?e="at least "+b:d>c&&(e=0===c?"none":"no more than "+c);if(e)throw Error(a+" failed: Was called with "+d+(1===d?" argument.":" arguments.")+" Expects "+e+".");}function A(a,b,c){var d="";switch(b){case 1:d=c?"first":"First";break;case 2:d=c?"second":"Second";break;case 3:d=c?"third":"Third";break;case 4:d=c?"fourth":"Fourth";break;default:throw Error("errorPrefix called with argumentNumber > 4.  Need to update it?");}return a=a+" failed: "+(d+" argument ")}
function B(a,b,c,d){if((!d||n(c))&&!ha(c))throw Error(A(a,b,d)+"must be a valid function.");}function lb(a,b,c){if(n(c)&&(!ia(c)||null===c))throw Error(A(a,b,!0)+"must be a valid context object.");};function mb(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test("undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:"")};function C(a,b){this.name=a;this.R=b}function nb(a,b){return new C(a,b)};function ob(a,b){return pb(a.name,b.name)}function qb(a,b){return pb(a,b)};function rb(a){this.rc=a;this.Ad="firebase:"}h=rb.prototype;h.set=function(a,b){null==b?this.rc.removeItem(this.Ad+a):this.rc.setItem(this.Ad+a,x(b))};h.get=function(a){a=this.rc.getItem(this.Ad+a);return null==a?null:ib(a)};h.remove=function(a){this.rc.removeItem(this.Ad+a)};h.We=!1;h.toString=function(){return this.rc.toString()};function sb(){this.mc={}}sb.prototype.set=function(a,b){null==b?delete this.mc[a]:this.mc[a]=b};sb.prototype.get=function(a){return bb(this.mc,a)?this.mc[a]:null};sb.prototype.remove=function(a){delete this.mc[a]};sb.prototype.We=!0;function tb(a){try{if("undefined"!==typeof window&&"undefined"!==typeof window[a]){var b=window[a];b.setItem("firebase:sentinel","cache");b.removeItem("firebase:sentinel");return new rb(b)}}catch(c){}return new sb}var ub=tb("localStorage"),vb=tb("sessionStorage");function wb(a,b,c,d,e){this.host=a.toLowerCase();this.domain=this.host.substr(this.host.indexOf(".")+1);this.Pc=b;this.ne=c;this.tg=d;this.ef=e||"";this.Za=ub.get("host:"+a)||this.host}function xb(a,b){b!==a.Za&&(a.Za=b,"s-"===a.Za.substr(0,2)&&ub.set("host:"+a.host,a.Za))}
function yb(a,b,c){D("string"===typeof b,"typeof type must == string");D("object"===typeof c,"typeof params must == object");if(b===zb)b=(a.Pc?"wss://":"ws://")+a.Za+"/.ws?";else if(b===Ab)b=(a.Pc?"https://":"http://")+a.Za+"/.lp?";else throw Error("Unknown connection type: "+b);a.host!==a.Za&&(c.ns=a.ne);var d=[];v(c,function(a,b){d.push(b+"="+a)});return b+d.join("&")}wb.prototype.toString=function(){var a=(this.Pc?"https://":"http://")+this.host;this.ef&&(a+="<"+this.ef+">");return a};function Bb(a,b){return a&&"object"===typeof a?(D(".sv"in a,"Unexpected leaf node or priority contents"),b[a[".sv"]]):a}function Cb(a,b){var c=new Db;Eb(a,new E(""),function(a,e){Fb(c,a,Gb(e,b))});return c}function Gb(a,b){var c=a.C().H(),c=Bb(c,b),d;if(a.J()){var e=Bb(a.Ca(),b);return e!==a.Ca()||c!==a.C().H()?new Hb(e,G(c)):a}d=a;c!==a.C().H()&&(d=d.fa(new Hb(c)));a.O(H,function(a,c){var e=Gb(c,b);e!==c&&(d=d.T(a,e))});return d};var Ib=function(){var a=1;return function(){return a++}}(),D=$a,Jb=ab;function Kb(a){try{return(new Buffer(a,"base64")).toString("utf8")}catch(b){I("base64Decode failed: ",b)}return null}function Lb(a){var b=jb(a);a=new ta;a.update(b);var b=[],c=8*a.Md;56>a.Yb?a.update(a.xd,56-a.Yb):a.update(a.xd,a.Va-(a.Yb-56));for(var d=a.Va-1;56<=d;d--)a.Sd[d]=c&255,c/=256;ua(a,a.Sd);for(d=c=0;5>d;d++)for(var e=24;0<=e;e-=8)b[c]=a.M[d]>>e&255,++c;return Za(b)}
function Mb(a){for(var b="",c=0;c<arguments.length;c++)b=fa(arguments[c])?b+Mb.apply(null,arguments[c]):"object"===typeof arguments[c]?b+x(arguments[c]):b+arguments[c],b+=" ";return b}var Nb=null,Ob=!0;
function Pb(a,b){$a(!b||!0===a||!1===a,"Can't turn on custom loggers persistently.");!0===a?("undefined"!==typeof console&&("function"===typeof console.log?Nb=q(console.log,console):"object"===typeof console.log&&(Nb=function(a){console.log(a)})),b&&vb.set("logging_enabled",!0)):ha(a)?Nb=a:(Nb=null,vb.remove("logging_enabled"))}function I(a){!0===Ob&&(Ob=!1,null===Nb&&!0===vb.get("logging_enabled")&&Pb(!0));if(Nb){var b=Mb.apply(null,arguments);Nb(b)}}
function Qb(a){return function(){I(a,arguments)}}function Rb(a){if("undefined"!==typeof console){var b="FIREBASE INTERNAL ERROR: "+Mb.apply(null,arguments);"undefined"!==typeof console.error?console.error(b):console.log(b)}}function Sb(a){var b=Mb.apply(null,arguments);throw Error("FIREBASE FATAL ERROR: "+b);}function J(a){if("undefined"!==typeof console){var b="FIREBASE WARNING: "+Mb.apply(null,arguments);"undefined"!==typeof console.warn?console.warn(b):console.log(b)}}
function Tb(a){var b,c,d,e,f,g=a;f=c=a=b="";d=!0;e="https";if(p(g)){var k=g.indexOf("//");0<=k&&(e=g.substring(0,k-1),g=g.substring(k+2));k=g.indexOf("/");-1===k&&(k=g.length);b=g.substring(0,k);f="";g=g.substring(k).split("/");for(k=0;k<g.length;k++)if(0<g[k].length){var m=g[k];try{m=decodeURIComponent(m.replace(/\+/g," "))}catch(l){}f+="/"+m}g=b.split(".");3===g.length?(a=g[1],c=g[0].toLowerCase()):2===g.length&&(a=g[0]);k=b.indexOf(":");0<=k&&(d="https"===e||"wss"===e)}"firebase"===a&&Sb(b+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead");
c&&"undefined"!=c||Sb("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com");d||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&J("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");return{gc:new wb(b,d,c,"ws"===e||"wss"===e),path:new E(f)}}function Ub(a){return ga(a)&&(a!=a||a==Number.POSITIVE_INFINITY||a==Number.NEGATIVE_INFINITY)}function Vb(a){a()}
function pb(a,b){if(a===b)return 0;if("[MIN_NAME]"===a||"[MAX_NAME]"===b)return-1;if("[MIN_NAME]"===b||"[MAX_NAME]"===a)return 1;var c=Wb(a),d=Wb(b);return null!==c?null!==d?0==c-d?a.length-b.length:c-d:-1:null!==d?1:a<b?-1:1}function Xb(a,b){if(b&&a in b)return b[a];throw Error("Missing required key ("+a+") in object: "+x(b));}
function Yb(a){if("object"!==typeof a||null===a)return x(a);var b=[],c;for(c in a)b.push(c);b.sort();c="{";for(var d=0;d<b.length;d++)0!==d&&(c+=","),c+=x(b[d]),c+=":",c+=Yb(a[b[d]]);return c+"}"}function Zb(a,b){if(a.length<=b)return[a];for(var c=[],d=0;d<a.length;d+=b)d+b>a?c.push(a.substring(d,a.length)):c.push(a.substring(d,d+b));return c}function $b(a,b){if(ea(a))for(var c=0;c<a.length;++c)b(c,a[c]);else v(a,b)}
function ac(a){D(!Ub(a),"Invalid JSON number");var b,c,d,e;0===a?(d=c=0,b=-Infinity===1/a?1:0):(b=0>a,a=Math.abs(a),a>=Math.pow(2,-1022)?(d=Math.min(Math.floor(Math.log(a)/Math.LN2),1023),c=d+1023,d=Math.round(a*Math.pow(2,52-d)-Math.pow(2,52))):(c=0,d=Math.round(a/Math.pow(2,-1074))));e=[];for(a=52;a;--a)e.push(d%2?1:0),d=Math.floor(d/2);for(a=11;a;--a)e.push(c%2?1:0),c=Math.floor(c/2);e.push(b?1:0);e.reverse();b=e.join("");c="";for(a=0;64>a;a+=8)d=parseInt(b.substr(a,8),2).toString(16),1===d.length&&
(d="0"+d),c+=d;return c.toLowerCase()}var bc=/^-?\d{1,10}$/;function Wb(a){return bc.test(a)&&(a=Number(a),-2147483648<=a&&2147483647>=a)?a:null}function cc(a){try{a()}catch(b){setTimeout(function(){J("Exception was thrown by user callback.",b.stack||"");throw b;},Math.floor(0))}}function dc(a,b,c){Object.defineProperty(a,b,{get:c})}function ec(a,b){var c=setTimeout(a,b);"object"===typeof c&&c.unref&&c.unref();return c};function fc(a){var b={},c={},d={},e="";try{var f=a.split("."),b=ib(Kb(f[0])||""),c=ib(Kb(f[1])||""),e=f[2],d=c.d||{};delete c.d}catch(g){}return{yg:b,He:c,data:d,og:e}}function gc(a){a=fc(a);var b=a.He;return!!a.og&&!!b&&"object"===typeof b&&b.hasOwnProperty("iat")}function hc(a){a=fc(a).He;return"object"===typeof a&&!0===w(a,"admin")};function ic(){}var jc={};function kc(a){return q(a.compare,a)}ic.prototype.kd=function(a,b){return 0!==this.compare(new C("[MIN_NAME]",a),new C("[MIN_NAME]",b))};ic.prototype.Ec=function(){return lc};function mc(a){D(!a.e()&&".priority"!==K(a),"Can't create PathIndex with empty path or .priority key");this.$b=a}la(mc,ic);h=mc.prototype;h.uc=function(a){return!a.P(this.$b).e()};h.compare=function(a,b){var c=a.R.P(this.$b),d=b.R.P(this.$b),c=c.pc(d);return 0===c?pb(a.name,b.name):c};
h.Bc=function(a,b){var c=G(a),c=L.F(this.$b,c);return new C(b,c)};h.Cc=function(){var a=L.F(this.$b,nc);return new C("[MAX_NAME]",a)};h.toString=function(){return this.$b.slice().join("/")};function oc(){}la(oc,ic);h=oc.prototype;h.compare=function(a,b){var c=a.R.C(),d=b.R.C(),c=c.pc(d);return 0===c?pb(a.name,b.name):c};h.uc=function(a){return!a.C().e()};h.kd=function(a,b){return!a.C().Z(b.C())};h.Ec=function(){return lc};h.Cc=function(){return new C("[MAX_NAME]",new Hb("[PRIORITY-POST]",nc))};
h.Bc=function(a,b){var c=G(a);return new C(b,new Hb("[PRIORITY-POST]",c))};h.toString=function(){return".priority"};var H=new oc;function pc(){}la(pc,ic);h=pc.prototype;h.compare=function(a,b){return pb(a.name,b.name)};h.uc=function(){throw Jb("KeyIndex.isDefinedOn not expected to be called.");};h.kd=function(){return!1};h.Ec=function(){return lc};h.Cc=function(){return new C("[MAX_NAME]",L)};h.Bc=function(a){D(p(a),"KeyIndex indexValue must always be a string.");return new C(a,L)};h.toString=function(){return".key"};
var qc=new pc;function rc(){}la(rc,ic);h=rc.prototype;h.compare=function(a,b){var c=a.R.pc(b.R);return 0===c?pb(a.name,b.name):c};h.uc=function(){return!0};h.kd=function(a,b){return!a.Z(b)};h.Ec=function(){return lc};h.Cc=function(){return sc};h.Bc=function(a,b){var c=G(a);return new C(b,c)};h.toString=function(){return".value"};var tc=new rc;function uc(a,b){this.ld=a;this.ac=b}uc.prototype.get=function(a){var b=w(this.ld,a);if(!b)throw Error("No index defined for "+a);return b===jc?null:b};function vc(a,b,c){var d=Ia(a.ld,function(d,f){var g=w(a.ac,f);D(g,"Missing index implementation for "+f);if(d===jc){if(g.uc(b.R)){for(var k=[],m=c.Ub(nb),l=M(m);l;)l.name!=b.name&&k.push(l),l=M(m);k.push(b);return wc(k,kc(g))}return jc}g=c.get(b.name);k=d;g&&(k=k.remove(new C(b.name,g)));return k.Na(b,b.R)});return new uc(d,a.ac)}
function xc(a,b,c){var d=Ia(a.ld,function(a){if(a===jc)return a;var d=c.get(b.name);return d?a.remove(new C(b.name,d)):a});return new uc(d,a.ac)}var yc=new uc({".priority":jc},{".priority":H});function Hb(a,b){this.B=a;D(n(this.B)&&null!==this.B,"LeafNode shouldn't be created with null/undefined value.");this.aa=b||L;zc(this.aa);this.Bb=null}var Ac=["object","boolean","number","string"];h=Hb.prototype;h.J=function(){return!0};h.C=function(){return this.aa};h.fa=function(a){return new Hb(this.B,a)};h.Q=function(a){return".priority"===a?this.aa:L};h.P=function(a){return a.e()?this:".priority"===K(a)?this.aa:L};h.Da=function(){return!1};h.Se=function(){return null};
h.T=function(a,b){return".priority"===a?this.fa(b):b.e()&&".priority"!==a?this:L.T(a,b).fa(this.aa)};h.F=function(a,b){var c=K(a);if(null===c)return b;if(b.e()&&".priority"!==c)return this;D(".priority"!==c||1===Bc(a),".priority must be the last token in a path");return this.T(c,L.F(N(a),b))};h.e=function(){return!1};h.Cb=function(){return 0};h.O=function(){return!1};h.H=function(a){return a&&!this.C().e()?{".value":this.Ca(),".priority":this.C().H()}:this.Ca()};
h.hash=function(){if(null===this.Bb){var a="";this.aa.e()||(a+="priority:"+Cc(this.aa.H())+":");var b=typeof this.B,a=a+(b+":"),a="number"===b?a+ac(this.B):a+this.B;this.Bb=Lb(a)}return this.Bb};h.Ca=function(){return this.B};h.pc=function(a){if(a===L)return 1;if(a instanceof O)return-1;D(a.J(),"Unknown node type");var b=typeof a.B,c=typeof this.B,d=xa(Ac,b),e=xa(Ac,c);D(0<=d,"Unknown leaf type: "+b);D(0<=e,"Unknown leaf type: "+c);return d===e?"object"===c?0:this.B<a.B?-1:this.B===a.B?0:1:e-d};
h.lb=function(){return this};h.vc=function(){return!0};h.Z=function(a){return a===this?!0:a.J()?this.B===a.B&&this.aa.Z(a.aa):!1};h.toString=function(){return x(this.H(!0))};function Dc(){this.set={}}h=Dc.prototype;h.add=function(a,b){this.set[a]=null!==b?b:!0};h.contains=function(a){return bb(this.set,a)};h.get=function(a){return this.contains(a)?this.set[a]:void 0};h.remove=function(a){delete this.set[a]};h.clear=function(){this.set={}};h.e=function(){return Ra(this.set)};h.count=function(){return Ka(this.set)};function Ec(a,b){v(a.set,function(a,d){b(d,a)})}h.keys=function(){var a=[];v(this.set,function(b,c){a.push(c)});return a};function Fc(a){D(ea(a)&&0<a.length,"Requires a non-empty array");this.Af=a;this.Ac={}}Fc.prototype.Ee=function(a,b){var c;c=this.Ac[a]||[];var d=c.length;if(0<d){for(var e=Array(d),f=0;f<d;f++)e[f]=c[f];c=e}else c=[];for(d=0;d<c.length;d++)c[d].Ge.apply(c[d].La,Array.prototype.slice.call(arguments,1))};Fc.prototype.dc=function(a,b,c){Gc(this,a);this.Ac[a]=this.Ac[a]||[];this.Ac[a].push({Ge:b,La:c});(a=this.Re(a))&&b.apply(c,a)};
Fc.prototype.Fc=function(a,b,c){Gc(this,a);a=this.Ac[a]||[];for(var d=0;d<a.length;d++)if(a[d].Ge===b&&(!c||c===a[d].La)){a.splice(d,1);break}};function Gc(a,b){D(Da(a.Af,function(a){return a===b}),"Unknown event: "+b)};var Hc=function(){var a=0,b=[];return function(c){var d=c===a;a=c;for(var e=Array(8),f=7;0<=f;f--)e[f]="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(c%64),c=Math.floor(c/64);D(0===c,"Cannot push at time == 0");c=e.join("");if(d){for(f=11;0<=f&&63===b[f];f--)b[f]=0;b[f]++}else for(f=0;12>f;f++)b[f]=Math.floor(64*Math.random());for(f=0;12>f;f++)c+="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(b[f]);D(20===c.length,"nextPushId: Length should be 20.");
return c}}();function Ic(){Fc.call(this,["online"]);this.ec=!0;if("undefined"!==typeof window&&"undefined"!==typeof window.addEventListener&&!mb()){var a=this;window.addEventListener("online",function(){a.ec||(a.ec=!0,a.Ee("online",!0))},!1);window.addEventListener("offline",function(){a.ec&&(a.ec=!1,a.Ee("online",!1))},!1)}}la(Ic,Fc);Ic.prototype.Re=function(a){D("online"===a,"Unknown event type: "+a);return[this.ec]};ca(Ic);function Jc(){Fc.call(this,["visible"]);var a,b;"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(b="visibilitychange",a="hidden"):"undefined"!==typeof document.mozHidden?(b="mozvisibilitychange",a="mozHidden"):"undefined"!==typeof document.msHidden?(b="msvisibilitychange",a="msHidden"):"undefined"!==typeof document.webkitHidden&&(b="webkitvisibilitychange",a="webkitHidden"));this.Kb=!0;if(b){var c=this;document.addEventListener(b,
function(){var b=!document[a];b!==c.Kb&&(c.Kb=b,c.Ee("visible",b))},!1)}}la(Jc,Fc);Jc.prototype.Re=function(a){D("visible"===a,"Unknown event type: "+a);return[this.Kb]};ca(Jc);(function(){var a=process.version;if("v0.10.22"===a||"v0.10.23"===a||"v0.10.24"===a){var b=function(a,b,c){this.chunk=a;this.encoding=b;this.callback=c},c=function(a,c,d,e,l){c.objectMode||!1===c.decodeStrings||"string"!==typeof d||(d=new Buffer(d,e));Buffer.isBuffer(d)&&(e="buffer");var r=c.objectMode?1:d.length;c.length+=r;var y=c.length<c.highWaterMark;y||(c.needDrain=!0);c.writing?c.buffer.push(new b(d,e,l)):(c.writelen=r,c.writecb=l,c.writing=!0,c.sync=!0,a._write(d,e,c.onwrite),c.sync=!1);return y},
d=function(a,b,c,d){var e=!0;if(!Buffer.isBuffer(c)&&"string"!==typeof c&&null!==c&&void 0!==c&&!b.objectMode){var r=new TypeError("Invalid non-string/buffer chunk");a.emit("error",r);process.nextTick(function(){d(r)});e=!1}return e},e=function(a,b){var c=Error("write after end");a.emit("error",c);process.nextTick(function(){b(c)})},a=require("_stream_writable");a.prototype.write=function(a,b,k){var m=this._writableState,l=!1;"function"===typeof b&&(k=b,b=null);Buffer.isBuffer(a)?b="buffer":b||(b=
m.defaultEncoding);"function"!==typeof k&&(k=function(){});m.ended?e(this,k):d(this,m,a,k)&&(l=c(this,m,a,b,k));return l};require("_stream_duplex").prototype.write=a.prototype.write}})();function E(a,b){if(1==arguments.length){this.o=a.split("/");for(var c=0,d=0;d<this.o.length;d++)0<this.o[d].length&&(this.o[c]=this.o[d],c++);this.o.length=c;this.Y=0}else this.o=a,this.Y=b}function P(a,b){var c=K(a);if(null===c)return b;if(c===K(b))return P(N(a),N(b));throw Error("INTERNAL ERROR: innerPath ("+b+") is not within outerPath ("+a+")");}
function Kc(a,b){for(var c=a.slice(),d=b.slice(),e=0;e<c.length&&e<d.length;e++){var f=pb(c[e],d[e]);if(0!==f)return f}return c.length===d.length?0:c.length<d.length?-1:1}function K(a){return a.Y>=a.o.length?null:a.o[a.Y]}function Bc(a){return a.o.length-a.Y}function N(a){var b=a.Y;b<a.o.length&&b++;return new E(a.o,b)}function Lc(a){return a.Y<a.o.length?a.o[a.o.length-1]:null}h=E.prototype;
h.toString=function(){for(var a="",b=this.Y;b<this.o.length;b++)""!==this.o[b]&&(a+="/"+this.o[b]);return a||"/"};h.slice=function(a){return this.o.slice(this.Y+(a||0))};h.parent=function(){if(this.Y>=this.o.length)return null;for(var a=[],b=this.Y;b<this.o.length-1;b++)a.push(this.o[b]);return new E(a,0)};
h.n=function(a){for(var b=[],c=this.Y;c<this.o.length;c++)b.push(this.o[c]);if(a instanceof E)for(c=a.Y;c<a.o.length;c++)b.push(a.o[c]);else for(a=a.split("/"),c=0;c<a.length;c++)0<a[c].length&&b.push(a[c]);return new E(b,0)};h.e=function(){return this.Y>=this.o.length};h.Z=function(a){if(Bc(this)!==Bc(a))return!1;for(var b=this.Y,c=a.Y;b<=this.o.length;b++,c++)if(this.o[b]!==a.o[c])return!1;return!0};
h.contains=function(a){var b=this.Y,c=a.Y;if(Bc(this)>Bc(a))return!1;for(;b<this.o.length;){if(this.o[b]!==a.o[c])return!1;++b;++c}return!0};var Q=new E("");function Mc(a,b){this.Pa=a.slice();this.Ga=Math.max(1,this.Pa.length);this.Ne=b;for(var c=0;c<this.Pa.length;c++)this.Ga+=kb(this.Pa[c]);Nc(this)}Mc.prototype.push=function(a){0<this.Pa.length&&(this.Ga+=1);this.Pa.push(a);this.Ga+=kb(a);Nc(this)};Mc.prototype.pop=function(){var a=this.Pa.pop();this.Ga-=kb(a);0<this.Pa.length&&--this.Ga};
function Nc(a){if(768<a.Ga)throw Error(a.Ne+"has a key path longer than 768 bytes ("+a.Ga+").");if(32<a.Pa.length)throw Error(a.Ne+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Oc(a));}function Oc(a){return 0==a.Pa.length?"":"in property '"+a.Pa.join(".")+"'"};function Pc(){this.children={};this.Zc=0;this.value=null}function Qc(a,b,c){this.sd=a?a:"";this.Mc=b?b:null;this.A=c?c:new Pc}function Rc(a,b){for(var c=b instanceof E?b:new E(b),d=a,e;null!==(e=K(c));)d=new Qc(e,d,w(d.A.children,e)||new Pc),c=N(c);return d}h=Qc.prototype;h.Ca=function(){return this.A.value};function Sc(a,b){D("undefined"!==typeof b,"Cannot set value to undefined");a.A.value=b;Tc(a)}h.clear=function(){this.A.value=null;this.A.children={};this.A.Zc=0;Tc(this)};
h.gd=function(){return 0<this.A.Zc};h.e=function(){return null===this.Ca()&&!this.gd()};h.O=function(a){var b=this;v(this.A.children,function(c,d){a(new Qc(d,b,c))})};function Uc(a,b,c,d){c&&!d&&b(a);a.O(function(a){Uc(a,b,!0,d)});c&&d&&b(a)}function Vc(a,b){for(var c=a.parent();null!==c&&!b(c);)c=c.parent()}h.path=function(){return new E(null===this.Mc?this.sd:this.Mc.path()+"/"+this.sd)};h.name=function(){return this.sd};h.parent=function(){return this.Mc};
function Tc(a){if(null!==a.Mc){var b=a.Mc,c=a.sd,d=a.e(),e=bb(b.A.children,c);d&&e?(delete b.A.children[c],b.A.Zc--,Tc(b)):d||e||(b.A.children[c]=a.A,b.A.Zc++,Tc(b))}};function Wc(a,b){this.Ka=a;this.ba=b?b:Xc}h=Wc.prototype;h.Na=function(a,b){return new Wc(this.Ka,this.ba.Na(a,b,this.Ka).X(null,null,!1,null,null))};h.remove=function(a){return new Wc(this.Ka,this.ba.remove(a,this.Ka).X(null,null,!1,null,null))};h.get=function(a){for(var b,c=this.ba;!c.e();){b=this.Ka(a,c.key);if(0===b)return c.value;0>b?c=c.left:0<b&&(c=c.right)}return null};
function Yc(a,b){for(var c,d=a.ba,e=null;!d.e();){c=a.Ka(b,d.key);if(0===c){if(d.left.e())return e?e.key:null;for(d=d.left;!d.right.e();)d=d.right;return d.key}0>c?d=d.left:0<c&&(e=d,d=d.right)}throw Error("Attempted to find predecessor key for a nonexistent key.  What gives?");}h.e=function(){return this.ba.e()};h.count=function(){return this.ba.count()};h.Dc=function(){return this.ba.Dc()};h.cc=function(){return this.ba.cc()};h.ha=function(a){return this.ba.ha(a)};
h.Ub=function(a){return new Zc(this.ba,null,this.Ka,!1,a)};h.Vb=function(a,b){return new Zc(this.ba,a,this.Ka,!1,b)};h.Xb=function(a,b){return new Zc(this.ba,a,this.Ka,!0,b)};h.Te=function(a){return new Zc(this.ba,null,this.Ka,!0,a)};function Zc(a,b,c,d,e){this.Fd=e||null;this.ie=d;this.Oa=[];for(e=1;!a.e();)if(e=b?c(a.key,b):1,d&&(e*=-1),0>e)a=this.ie?a.left:a.right;else if(0===e){this.Oa.push(a);break}else this.Oa.push(a),a=this.ie?a.right:a.left}
function M(a){if(0===a.Oa.length)return null;var b=a.Oa.pop(),c;c=a.Fd?a.Fd(b.key,b.value):{key:b.key,value:b.value};if(a.ie)for(b=b.left;!b.e();)a.Oa.push(b),b=b.right;else for(b=b.right;!b.e();)a.Oa.push(b),b=b.left;return c}function $c(a){if(0===a.Oa.length)return null;var b;b=a.Oa;b=b[b.length-1];return a.Fd?a.Fd(b.key,b.value):{key:b.key,value:b.value}}function ad(a,b,c,d,e){this.key=a;this.value=b;this.color=null!=c?c:!0;this.left=null!=d?d:Xc;this.right=null!=e?e:Xc}h=ad.prototype;
h.X=function(a,b,c,d,e){return new ad(null!=a?a:this.key,null!=b?b:this.value,null!=c?c:this.color,null!=d?d:this.left,null!=e?e:this.right)};h.count=function(){return this.left.count()+1+this.right.count()};h.e=function(){return!1};h.ha=function(a){return this.left.ha(a)||a(this.key,this.value)||this.right.ha(a)};function bd(a){return a.left.e()?a:bd(a.left)}h.Dc=function(){return bd(this).key};h.cc=function(){return this.right.e()?this.key:this.right.cc()};
h.Na=function(a,b,c){var d,e;e=this;d=c(a,e.key);e=0>d?e.X(null,null,null,e.left.Na(a,b,c),null):0===d?e.X(null,b,null,null,null):e.X(null,null,null,null,e.right.Na(a,b,c));return cd(e)};function dd(a){if(a.left.e())return Xc;a.left.ea()||a.left.left.ea()||(a=fd(a));a=a.X(null,null,null,dd(a.left),null);return cd(a)}
h.remove=function(a,b){var c,d;c=this;if(0>b(a,c.key))c.left.e()||c.left.ea()||c.left.left.ea()||(c=fd(c)),c=c.X(null,null,null,c.left.remove(a,b),null);else{c.left.ea()&&(c=gd(c));c.right.e()||c.right.ea()||c.right.left.ea()||(c=hd(c),c.left.left.ea()&&(c=gd(c),c=hd(c)));if(0===b(a,c.key)){if(c.right.e())return Xc;d=bd(c.right);c=c.X(d.key,d.value,null,null,dd(c.right))}c=c.X(null,null,null,null,c.right.remove(a,b))}return cd(c)};h.ea=function(){return this.color};
function cd(a){a.right.ea()&&!a.left.ea()&&(a=id(a));a.left.ea()&&a.left.left.ea()&&(a=gd(a));a.left.ea()&&a.right.ea()&&(a=hd(a));return a}function fd(a){a=hd(a);a.right.left.ea()&&(a=a.X(null,null,null,null,gd(a.right)),a=id(a),a=hd(a));return a}function id(a){return a.right.X(null,null,a.color,a.X(null,null,!0,null,a.right.left),null)}function gd(a){return a.left.X(null,null,a.color,null,a.X(null,null,!0,a.left.right,null))}
function hd(a){return a.X(null,null,!a.color,a.left.X(null,null,!a.left.color,null,null),a.right.X(null,null,!a.right.color,null,null))}function jd(){}h=jd.prototype;h.X=function(){return this};h.Na=function(a,b){return new ad(a,b,null)};h.remove=function(){return this};h.count=function(){return 0};h.e=function(){return!0};h.ha=function(){return!1};h.Dc=function(){return null};h.cc=function(){return null};h.ea=function(){return!1};var Xc=new jd;function O(a,b,c){this.k=a;(this.aa=b)&&zc(this.aa);a.e()&&D(!this.aa||this.aa.e(),"An empty node cannot have a priority");this.wb=c;this.Bb=null}h=O.prototype;h.J=function(){return!1};h.C=function(){return this.aa||L};h.fa=function(a){return this.k.e()?this:new O(this.k,a,this.wb)};h.Q=function(a){if(".priority"===a)return this.C();a=this.k.get(a);return null===a?L:a};h.P=function(a){var b=K(a);return null===b?this:this.Q(b).P(N(a))};h.Da=function(a){return null!==this.k.get(a)};
h.T=function(a,b){D(b,"We should always be passing snapshot nodes");if(".priority"===a)return this.fa(b);var c=new C(a,b),d,e;b.e()?(d=this.k.remove(a),c=xc(this.wb,c,this.k)):(d=this.k.Na(a,b),c=vc(this.wb,c,this.k));e=d.e()?L:this.aa;return new O(d,e,c)};h.F=function(a,b){var c=K(a);if(null===c)return b;D(".priority"!==K(a)||1===Bc(a),".priority must be the last token in a path");var d=this.Q(c).F(N(a),b);return this.T(c,d)};h.e=function(){return this.k.e()};h.Cb=function(){return this.k.count()};
var kd=/^(0|[1-9]\d*)$/;h=O.prototype;h.H=function(a){if(this.e())return null;var b={},c=0,d=0,e=!0;this.O(H,function(f,g){b[f]=g.H(a);c++;e&&kd.test(f)?d=Math.max(d,Number(f)):e=!1});if(!a&&e&&d<2*c){var f=[],g;for(g in b)f[g]=b[g];return f}a&&!this.C().e()&&(b[".priority"]=this.C().H());return b};h.hash=function(){if(null===this.Bb){var a="";this.C().e()||(a+="priority:"+Cc(this.C().H())+":");this.O(H,function(b,c){var d=c.hash();""!==d&&(a+=":"+b+":"+d)});this.Bb=""===a?"":Lb(a)}return this.Bb};
h.Se=function(a,b,c){return(c=ld(this,c))?(a=Yc(c,new C(a,b)))?a.name:null:Yc(this.k,a)};function md(a,b){var c;c=(c=ld(a,b))?(c=c.Dc())&&c.name:a.k.Dc();return c?new C(c,a.k.get(c)):null}function nd(a,b){var c;c=(c=ld(a,b))?(c=c.cc())&&c.name:a.k.cc();return c?new C(c,a.k.get(c)):null}h.O=function(a,b){var c=ld(this,a);return c?c.ha(function(a){return b(a.name,a.R)}):this.k.ha(b)};h.Ub=function(a){return this.Vb(a.Ec(),a)};
h.Vb=function(a,b){var c=ld(this,b);if(c)return c.Vb(a,function(a){return a});for(var c=this.k.Vb(a.name,nb),d=$c(c);null!=d&&0>b.compare(d,a);)M(c),d=$c(c);return c};h.Te=function(a){return this.Xb(a.Cc(),a)};h.Xb=function(a,b){var c=ld(this,b);if(c)return c.Xb(a,function(a){return a});for(var c=this.k.Xb(a.name,nb),d=$c(c);null!=d&&0<b.compare(d,a);)M(c),d=$c(c);return c};h.pc=function(a){return this.e()?a.e()?0:-1:a.J()||a.e()?1:a===nc?-1:0};
h.lb=function(a){if(a===qc||Oa(this.wb.ac,a.toString()))return this;var b=this.wb,c=this.k;D(a!==qc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var d=[],e=!1,c=c.Ub(nb),f=M(c);f;)e=e||a.uc(f.R),d.push(f),f=M(c);d=e?wc(d,kc(a)):jc;e=a.toString();c=Sa(b.ac);c[e]=a;a=Sa(b.ld);a[e]=d;return new O(this.k,this.aa,new uc(a,c))};h.vc=function(a){return a===qc||Oa(this.wb.ac,a.toString())};
h.Z=function(a){if(a===this)return!0;if(a.J())return!1;if(this.C().Z(a.C())&&this.k.count()===a.k.count()){var b=this.Ub(H);a=a.Ub(H);for(var c=M(b),d=M(a);c&&d;){if(c.name!==d.name||!c.R.Z(d.R))return!1;c=M(b);d=M(a)}return null===c&&null===d}return!1};function ld(a,b){return b===qc?null:a.wb.get(b.toString())}h.toString=function(){return x(this.H(!0))};function G(a,b){if(null===a)return L;var c=null;"object"===typeof a&&".priority"in a?c=a[".priority"]:"undefined"!==typeof b&&(c=b);D(null===c||"string"===typeof c||"number"===typeof c||"object"===typeof c&&".sv"in c,"Invalid priority type found: "+typeof c);"object"===typeof a&&".value"in a&&null!==a[".value"]&&(a=a[".value"]);if("object"!==typeof a||".sv"in a)return new Hb(a,G(c));if(a instanceof Array){var d=L,e=a;v(e,function(a,b){if(bb(e,b)&&"."!==b.substring(0,1)){var c=G(a);if(c.J()||!c.e())d=
d.T(b,c)}});return d.fa(G(c))}var f=[],g=!1,k=a;cb(k,function(a){if("string"!==typeof a||"."!==a.substring(0,1)){var b=G(k[a]);b.e()||(g=g||!b.C().e(),f.push(new C(a,b)))}});if(0==f.length)return L;var m=wc(f,ob,function(a){return a.name},qb);if(g){var l=wc(f,kc(H));return new O(m,G(c),new uc({".priority":l},{".priority":H}))}return new O(m,G(c),yc)}var od=Math.log(2);
function pd(a){this.count=parseInt(Math.log(a+1)/od,10);this.Le=this.count-1;this.Bf=a+1&parseInt(Array(this.count+1).join("1"),2)}function qd(a){var b=!(a.Bf&1<<a.Le);a.Le--;return b}
function wc(a,b,c,d){function e(b,d){var f=d-b;if(0==f)return null;if(1==f){var l=a[b],r=c?c(l):l;return new ad(r,l.R,!1,null,null)}var l=parseInt(f/2,10)+b,f=e(b,l),y=e(l+1,d),l=a[l],r=c?c(l):l;return new ad(r,l.R,!1,f,y)}a.sort(b);var f=function(b){function d(b,g){var k=r-b,y=r;r-=b;var y=e(k+1,y),k=a[k],F=c?c(k):k,y=new ad(F,k.R,g,null,y);f?f.left=y:l=y;f=y}for(var f=null,l=null,r=a.length,y=0;y<b.count;++y){var F=qd(b),ed=Math.pow(2,b.count-(y+1));F?d(ed,!1):(d(ed,!1),d(ed,!0))}return l}(new pd(a.length));
return null!==f?new Wc(d||b,f):new Wc(d||b)}function Cc(a){return"number"===typeof a?"number:"+ac(a):"string:"+a}function zc(a){if(a.J()){var b=a.H();D("string"===typeof b||"number"===typeof b||"object"===typeof b&&bb(b,".sv"),"Priority must be a string or number.")}else D(a===nc||a.e(),"priority of unexpected type.");D(a===nc||a.C().e(),"Priority nodes can't have a priority of their own.")}var L=new O(new Wc(qb),null,yc);function rd(){O.call(this,new Wc(qb),L,yc)}la(rd,O);h=rd.prototype;
h.pc=function(a){return a===this?0:1};h.Z=function(a){return a===this};h.C=function(){return this};h.Q=function(){return L};h.e=function(){return!1};var nc=new rd,lc=new C("[MIN_NAME]",L),sc=new C("[MAX_NAME]",nc);function sd(a,b){this.value=a;this.children=b||td}var td=new Wc(function(a,b){return a===b?0:a<b?-1:1});function ud(a){var b=R;v(a,function(a,d){b=b.set(new E(d),a)});return b}h=sd.prototype;h.e=function(){return null===this.value&&this.children.e()};function vd(a,b,c){if(null!=a.value&&c(a.value))return{path:Q,value:a.value};if(b.e())return null;var d=K(b);a=a.children.get(d);return null!==a?(b=vd(a,N(b),c),null!=b?{path:(new E(d)).n(b.path),value:b.value}:null):null}
function wd(a,b){return vd(a,b,function(){return!0})}h.subtree=function(a){if(a.e())return this;var b=this.children.get(K(a));return null!==b?b.subtree(N(a)):R};h.set=function(a,b){if(a.e())return new sd(b,this.children);var c=K(a),d=(this.children.get(c)||R).set(N(a),b),c=this.children.Na(c,d);return new sd(this.value,c)};
h.remove=function(a){if(a.e())return this.children.e()?R:new sd(null,this.children);var b=K(a),c=this.children.get(b);return c?(a=c.remove(N(a)),b=a.e()?this.children.remove(b):this.children.Na(b,a),null===this.value&&b.e()?R:new sd(this.value,b)):this};h.get=function(a){if(a.e())return this.value;var b=this.children.get(K(a));return b?b.get(N(a)):null};
function xd(a,b,c){if(b.e())return c;var d=K(b);b=xd(a.children.get(d)||R,N(b),c);d=b.e()?a.children.remove(d):a.children.Na(d,b);return new sd(a.value,d)}function yd(a,b){return zd(a,Q,b)}function zd(a,b,c){var d={};a.children.ha(function(a,f){d[a]=zd(f,b.n(a),c)});return c(b,a.value,d)}function Ad(a,b,c){return Bd(a,b,Q,c)}function Bd(a,b,c,d){var e=a.value?d(c,a.value):!1;if(e)return e;if(b.e())return null;e=K(b);return(a=a.children.get(e))?Bd(a,N(b),c.n(e),d):null}
function Cd(a,b,c){Dd(a,b,Q,c)}function Dd(a,b,c,d){if(b.e())return a;a.value&&d(c,a.value);var e=K(b);return(a=a.children.get(e))?Dd(a,N(b),c.n(e),d):R}function Ed(a,b){Fd(a,Q,b)}function Fd(a,b,c){a.children.ha(function(a,e){Fd(e,b.n(a),c)});a.value&&c(b,a.value)}function Gd(a,b){a.children.ha(function(a,d){d.value&&b(a,d.value)})}var R=new sd(null);sd.prototype.toString=function(){var a={};Ed(this,function(b,c){a[b.toString()]=c.toString()});return x(a)};var Hd=/[\[\].#$\/\u0000-\u001F\u007F]/,Id=/[\[\].#$\u0000-\u001F\u007F]/;function Jd(a){return p(a)&&0!==a.length&&!Hd.test(a)}function Kd(a){return null===a||p(a)||ga(a)&&!Ub(a)||ia(a)&&bb(a,".sv")}function Ld(a,b,c,d){d&&!n(b)||Md(A(a,1,d),b,c)}
function Md(a,b,c){c instanceof E&&(c=new Mc(c,a));if(!n(b))throw Error(a+"contains undefined "+Oc(c));if(ha(b))throw Error(a+"contains a function "+Oc(c)+" with contents: "+b.toString());if(Ub(b))throw Error(a+"contains "+b.toString()+" "+Oc(c));if(p(b)&&b.length>10485760/3&&10485760<kb(b))throw Error(a+"contains a string greater than 10485760 utf8 bytes "+Oc(c)+" ('"+b.substring(0,50)+"...')");if(ia(b)){var d=!1,e=!1;cb(b,function(b,g){if(".value"===b)d=!0;else if(".priority"!==b&&".sv"!==b&&(e=
!0,!Jd(b)))throw Error(a+" contains an invalid key ("+b+") "+Oc(c)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');c.push(b);Md(a,g,c);c.pop()});if(d&&e)throw Error(a+' contains ".value" child '+Oc(c)+" in addition to actual children.");}}
function Nd(a,b){var c,d;for(c=0;c<b.length;c++){d=b[c];for(var e=d.slice(),f=0;f<e.length;f++)if((".priority"!==e[f]||f!==e.length-1)&&!Jd(e[f]))throw Error(a+"contains an invalid key ("+e[f]+") in path "+d.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');}b.sort(Kc);e=null;for(c=0;c<b.length;c++){d=b[c];if(null!==e&&e.contains(d))throw Error(a+"contains a path "+e.toString()+" that is ancestor of another path "+d.toString());e=d}}
function Od(a,b,c){var d=A(a,1,!1);if(!ia(b)||ea(b))throw Error(d+" must be an object containing the children to replace.");var e=[];cb(b,function(a,b){var k=new E(a);Md(d,b,c.n(k));if(".priority"===Lc(k)&&!Kd(b))throw Error(d+"contains an invalid value for '"+k.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");e.push(k)});Nd(d,e)}
function Pd(a,b,c){if(Ub(c))throw Error(A(a,b,!1)+"is "+c.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Kd(c))throw Error(A(a,b,!1)+"must be a valid Firebase priority (a string, finite number, server value, or null).");}
function Qd(a,b,c){if(!c||n(b))switch(b){case "value":case "child_added":case "child_removed":case "child_changed":case "child_moved":break;default:throw Error(A(a,1,c)+'must be a valid event type: "value", "child_added", "child_removed", "child_changed", or "child_moved".');}}function Rd(a,b){if(n(b)&&!Jd(b))throw Error(A(a,2,!0)+'was an invalid key: "'+b+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").');}
function Sd(a,b){if(!p(b)||0===b.length||Id.test(b))throw Error(A(a,1,!1)+'was an invalid path: "'+b+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"');}function Td(a,b){if(".info"===K(b))throw Error(a+" failed: Can't modify data under /.info/");}
function Ud(a,b){var c=b.path.toString(),d;!(d=!p(b.gc.host)||0===b.gc.host.length||!Jd(b.gc.ne))&&(d=0!==c.length)&&(c&&(c=c.replace(/^\/*\.info(\/|$)/,"/")),d=!(p(c)&&0!==c.length&&!Id.test(c)));if(d)throw Error(A(a,1,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".');};function Db(){this.k=this.B=null}Db.prototype.find=function(a){if(null!=this.B)return this.B.P(a);if(a.e()||null==this.k)return null;var b=K(a);a=N(a);return this.k.contains(b)?this.k.get(b).find(a):null};function Fb(a,b,c){if(b.e())a.B=c,a.k=null;else if(null!==a.B)a.B=a.B.F(b,c);else{null==a.k&&(a.k=new Dc);var d=K(b);a.k.contains(d)||a.k.add(d,new Db);a=a.k.get(d);b=N(b);Fb(a,b,c)}}
function Vd(a,b){if(b.e())return a.B=null,a.k=null,!0;if(null!==a.B){if(a.B.J())return!1;var c=a.B;a.B=null;c.O(H,function(b,c){Fb(a,new E(b),c)});return Vd(a,b)}return null!==a.k?(c=K(b),b=N(b),a.k.contains(c)&&Vd(a.k.get(c),b)&&a.k.remove(c),a.k.e()?(a.k=null,!0):!1):!0}function Eb(a,b,c){null!==a.B?c(b,a.B):a.O(function(a,e){var f=new E(b.toString()+"/"+a);Eb(e,f,c)})}Db.prototype.O=function(a){null!==this.k&&Ec(this.k,function(b,c){a(b,c)})};function Wd(a,b){this.type=Xd;this.source=a;this.path=b}Wd.prototype.Jc=function(){return this.path.e()?new Wd(this.source,Q):new Wd(this.source,N(this.path))};Wd.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" listen_complete)"};function Yd(a,b,c){this.type=Zd;this.source=a;this.path=b;this.children=c}Yd.prototype.Jc=function(a){if(this.path.e())return a=this.children.subtree(new E(a)),a.e()?null:a.value?new $d(this.source,Q,a.value):new Yd(this.source,Q,a);D(K(this.path)===a,"Can't get a merge for a child not on the path of the operation");return new Yd(this.source,N(this.path),this.children)};Yd.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"};function ae(a,b,c){this.type=be;this.source=ce;this.path=a;this.Mb=b;this.Gd=c}ae.prototype.Jc=function(a){if(this.path.e()){if(null!=this.Mb.value)return D(this.Mb.children.e(),"affectedTree should not have overlapping affected paths."),this;a=this.Mb.subtree(new E(a));return new ae(Q,a,this.Gd)}D(K(this.path)===a,"operationForChild called for unrelated child.");return new ae(N(this.path),this.Mb,this.Gd)};
ae.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" ack write revert="+this.Gd+" affectedTree="+this.Mb+")"};function $d(a,b,c){this.type=de;this.source=a;this.path=b;this.Fa=c}$d.prototype.Jc=function(a){return this.path.e()?new $d(this.source,Q,this.Fa.Q(a)):new $d(this.source,N(this.path),this.Fa)};$d.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" overwrite: "+this.Fa.toString()+")"};var de=0,Zd=1,be=2,Xd=3;function ee(a,b,c,d){this.be=a;this.Pe=b;this.Fb=c;this.Ce=d;D(!d||b,"Tagged queries must be from server.")}var ce=new ee(!0,!1,null,!1),fe=new ee(!1,!0,null,!1);ee.prototype.toString=function(){return this.be?"user":this.Ce?"server(queryID="+this.Fb+")":"server"};function ge(a,b,c){this.A=a;this.da=b;this.Qb=c}function he(a){return a.da}function ie(a){return a.Qb}function je(a,b){return b.e()?a.da&&!a.Qb:ke(a,K(b))}function ke(a,b){return a.da&&!a.Qb||a.A.Da(b)}ge.prototype.j=function(){return this.A};function le(a,b){this.N=a;this.Id=b}function me(a,b,c,d){return new le(new ge(b,c,d),a.Id)}function ne(a){return a.N.da?a.N.j():null}le.prototype.w=function(){return this.Id};function oe(a){return a.Id.da?a.Id.j():null};function pe(){}pe.prototype.Qe=function(){return null};pe.prototype.ce=function(){return null};var qe=new pe;function re(a,b,c){this.wf=a;this.Ja=b;this.wd=c}re.prototype.Qe=function(a){var b=this.Ja.N;if(ke(b,a))return b.j().Q(a);b=null!=this.wd?new ge(this.wd,!0,!1):this.Ja.w();return this.wf.nc(a,b)};re.prototype.ce=function(a,b,c){var d=null!=this.wd?this.wd:oe(this.Ja);a=this.wf.Td(d,b,1,c,a);return 0===a.length?null:a[0]};function se(a,b){this.Od=a;this.Cf=b}function te(a){this.U=a}
te.prototype.bb=function(a,b,c,d){var e=new ue,f;if(b.type===de)b.source.be?c=ve(this,a,b.path,b.Fa,c,d,e):(D(b.source.Pe,"Unknown source."),f=b.source.Ce||ie(a.w())&&!b.path.e(),c=we(this,a,b.path,b.Fa,c,d,f,e));else if(b.type===Zd)b.source.be?c=xe(this,a,b.path,b.children,c,d,e):(D(b.source.Pe,"Unknown source."),f=b.source.Ce||ie(a.w()),c=ye(this,a,b.path,b.children,c,d,f,e));else if(b.type===be)if(b.Gd)if(b=b.path,null!=c.ic(b))c=a;else{f=new re(c,a,d);d=a.N.j();if(b.e()||".priority"===K(b))he(a.w())?
b=c.Aa(oe(a)):(b=a.w().j(),D(b instanceof O,"serverChildren would be complete if leaf node"),b=c.oc(b)),b=this.U.ya(d,b,e);else{var g=K(b),k=c.nc(g,a.w());null==k&&ke(a.w(),g)&&(k=d.Q(g));b=null!=k?this.U.F(d,g,k,N(b),f,e):a.N.j().Da(g)?this.U.F(d,g,L,N(b),f,e):d;b.e()&&he(a.w())&&(d=c.Aa(oe(a)),d.J()&&(b=this.U.ya(b,d,e)))}d=he(a.w())||null!=c.ic(Q);c=me(a,b,d,this.U.Ma())}else c=ze(this,a,b.path,b.Mb,c,d,e);else if(b.type===Xd)d=b.path,b=a.w(),f=b.j(),g=b.da||d.e(),c=Ae(this,new le(a.N,new ge(f,
g,b.Qb)),d,c,qe,e);else throw Jb("Unknown operation type: "+b.type);e=Ma(e.eb);d=c;b=d.N;b.da&&(f=b.j().J()||b.j().e(),g=ne(a),(0<e.length||!a.N.da||f&&!b.j().Z(g)||!b.j().C().Z(g.C()))&&e.push(Be(ne(d))));return new se(c,e)};
function Ae(a,b,c,d,e,f){var g=b.N;if(null!=d.ic(c))return b;var k;if(c.e())D(he(b.w()),"If change path is empty, we must have complete server data"),ie(b.w())?(e=oe(b),d=d.oc(e instanceof O?e:L)):d=d.Aa(oe(b)),f=a.U.ya(b.N.j(),d,f);else{var m=K(c);if(".priority"==m)D(1==Bc(c),"Can't have a priority with additional path components"),f=g.j(),k=b.w().j(),d=d.Yc(c,f,k),f=null!=d?a.U.fa(f,d):g.j();else{var l=N(c);ke(g,m)?(k=b.w().j(),d=d.Yc(c,g.j(),k),d=null!=d?g.j().Q(m).F(l,d):g.j().Q(m)):d=d.nc(m,
b.w());f=null!=d?a.U.F(g.j(),m,d,l,e,f):g.j()}}return me(b,f,g.da||c.e(),a.U.Ma())}function we(a,b,c,d,e,f,g,k){var m=b.w();g=g?a.U:a.U.Sb();if(c.e())d=g.ya(m.j(),d,null);else if(g.Ma()&&!m.Qb)d=m.j().F(c,d),d=g.ya(m.j(),d,null);else{var l=K(c);if(!je(m,c)&&1<Bc(c))return b;var r=N(c);d=m.j().Q(l).F(r,d);d=".priority"==l?g.fa(m.j(),d):g.F(m.j(),l,d,r,qe,null)}m=m.da||c.e();b=new le(b.N,new ge(d,m,g.Ma()));return Ae(a,b,c,e,new re(e,b,f),k)}
function ve(a,b,c,d,e,f,g){var k=b.N;e=new re(e,b,f);if(c.e())g=a.U.ya(b.N.j(),d,g),a=me(b,g,!0,a.U.Ma());else if(f=K(c),".priority"===f)g=a.U.fa(b.N.j(),d),a=me(b,g,k.da,k.Qb);else{c=N(c);var m=k.j().Q(f);if(!c.e()){var l=e.Qe(f);d=null!=l?".priority"===Lc(c)&&l.P(c.parent()).e()?l:l.F(c,d):L}m.Z(d)?a=b:(g=a.U.F(k.j(),f,d,c,e,g),a=me(b,g,k.da,a.U.Ma()))}return a}
function xe(a,b,c,d,e,f,g){var k=b;Ed(d,function(d,l){var r=c.n(d);ke(b.N,K(r))&&(k=ve(a,k,r,l,e,f,g))});Ed(d,function(d,l){var r=c.n(d);ke(b.N,K(r))||(k=ve(a,k,r,l,e,f,g))});return k}function Ce(a,b){Ed(b,function(b,d){a=a.F(b,d)});return a}
function ye(a,b,c,d,e,f,g,k){if(b.w().j().e()&&!he(b.w()))return b;var m=b;c=c.e()?d:xd(R,c,d);var l=b.w().j();c.children.ha(function(c,d){if(l.Da(c)){var F=b.w().j().Q(c),F=Ce(F,d);m=we(a,m,new E(c),F,e,f,g,k)}});c.children.ha(function(c,d){var F=!ke(b.w(),c)&&null==d.value;l.Da(c)||F||(F=b.w().j().Q(c),F=Ce(F,d),m=we(a,m,new E(c),F,e,f,g,k))});return m}
function ze(a,b,c,d,e,f,g){if(null!=e.ic(c))return b;var k=ie(b.w()),m=b.w();if(null!=d.value){if(c.e()&&m.da||je(m,c))return we(a,b,c,m.j().P(c),e,f,k,g);if(c.e()){var l=R;m.j().O(qc,function(a,b){l=l.set(new E(a),b)});return ye(a,b,c,l,e,f,k,g)}return b}l=R;Ed(d,function(a){var b=c.n(a);je(m,b)&&(l=l.set(a,m.j().P(b)))});return ye(a,b,c,l,e,f,k,g)};function De(a){this.V=a;this.g=a.m.g}function Ee(a,b,c,d){var e=[],f=[];ya(b,function(b){b.type===Fe&&a.g.kd(b.oe,b.Ia)&&f.push(new S(Ge,b.Ia,b.Wa))});He(a,e,Ie,b,d,c);He(a,e,Je,b,d,c);He(a,e,Ge,f,d,c);He(a,e,Fe,b,d,c);He(a,e,Ke,b,d,c);return e}function He(a,b,c,d,e,f){d=za(d,function(a){return a.type===c});Ga(d,q(a.Ff,a));ya(d,function(c){var d=Le(a,c,f);ya(e,function(e){e.lf(c.type)&&b.push(e.createEvent(d,a.V))})})}
function Le(a,b,c){"value"!==b.type&&"child_removed"!==b.type&&(b.Bd=c.Se(b.Wa,b.Ia,a.g));return b}De.prototype.Ff=function(a,b){if(null==a.Wa||null==b.Wa)throw Jb("Should only compare child_ events.");return this.g.compare(new C(a.Wa,a.Ia),new C(b.Wa,b.Ia))};function Me(a,b){this.V=a;var c=a.m,d=new Ne(c.g),c=T(c)?new Ne(c.g):c.xa?new Oe(c):new Pe(c);this.ff=new te(c);var e=b.w(),f=b.N,g=d.ya(L,e.j(),null),k=c.ya(L,f.j(),null);this.Ja=new le(new ge(k,f.da,c.Ma()),new ge(g,e.da,d.Ma()));this.Ya=[];this.Lf=new De(a)}function Qe(a){return a.V}h=Me.prototype;h.w=function(){return this.Ja.w().j()};h.fb=function(a){var b=oe(this.Ja);return b&&(T(this.V.m)||!a.e()&&!b.Q(K(a)).e())?b.P(a):null};h.e=function(){return 0===this.Ya.length};h.Lb=function(a){this.Ya.push(a)};
h.ib=function(a,b){var c=[];if(b){D(null==a,"A cancel should cancel all event registrations.");var d=this.V.path;ya(this.Ya,function(a){(a=a.Je(b,d))&&c.push(a)})}if(a){for(var e=[],f=0;f<this.Ya.length;++f){var g=this.Ya[f];if(!g.matches(a))e.push(g);else if(a.Ue()){e=e.concat(this.Ya.slice(f+1));break}}this.Ya=e}else this.Ya=[];return c};
h.bb=function(a,b,c){a.type===Zd&&null!==a.source.Fb&&(D(oe(this.Ja),"We should always have a full cache before handling merges"),D(ne(this.Ja),"Missing event cache, even though we have a server cache"));var d=this.Ja;a=this.ff.bb(d,a,b,c);b=this.ff;c=a.Od;D(c.N.j().vc(b.U.g),"Event snap not indexed");D(c.w().j().vc(b.U.g),"Server snap not indexed");D(he(a.Od.w())||!he(d.w()),"Once a server snap is complete, it should never go back");this.Ja=a.Od;return Re(this,a.Cf,a.Od.N.j(),null)};
function Se(a,b){var c=a.Ja.N,d=[];c.j().J()||c.j().O(H,function(a,b){d.push(new S(Je,b,a))});c.da&&d.push(Be(c.j()));return Re(a,d,c.j(),b)}function Re(a,b,c,d){return Ee(a.Lf,b,c,d?[d]:a.Ya)};function Te(a,b,c,d){this.Yd=b;this.Jd=c;this.Bd=d;this.ed=a}Te.prototype.Wb=function(){var a=this.Jd.ub();return"value"===this.ed?a.path:a.getParent().path};Te.prototype.de=function(){return this.ed};Te.prototype.Rb=function(){return this.Yd.Rb(this)};Te.prototype.toString=function(){return this.Wb().toString()+":"+this.ed+":"+x(this.Jd.Zd())};function Ue(a,b,c){this.Yd=a;this.error=b;this.path=c}Ue.prototype.Wb=function(){return this.path};Ue.prototype.de=function(){return"cancel"};
Ue.prototype.Rb=function(){return this.Yd.Rb(this)};Ue.prototype.toString=function(){return this.path.toString()+":cancel"};function Ve(){this.tb=[]}function We(a,b){for(var c=null,d=0;d<b.length;d++){var e=b[d],f=e.Wb();null===c||f.Z(c.Wb())||(a.tb.push(c),c=null);null===c&&(c=new Xe(f));c.add(e)}c&&a.tb.push(c)}function Ye(a,b,c){We(a,c);Ze(a,function(a){return a.Z(b)})}function $e(a,b,c){We(a,c);Ze(a,function(a){return a.contains(b)||b.contains(a)})}
function Ze(a,b){for(var c=!0,d=0;d<a.tb.length;d++){var e=a.tb[d];if(e)if(e=e.Wb(),b(e)){for(var e=a.tb[d],f=0;f<e.fd.length;f++){var g=e.fd[f];if(null!==g){e.fd[f]=null;var k=g.Rb();Nb&&I("event: "+g.toString());cc(k)}}a.tb[d]=null}else c=!1}c&&(a.tb=[])}function Xe(a){this.qa=a;this.fd=[]}Xe.prototype.add=function(a){this.fd.push(a)};Xe.prototype.Wb=function(){return this.qa};function Ne(a){this.g=a}h=Ne.prototype;h.F=function(a,b,c,d,e,f){D(a.vc(this.g),"A node must be indexed if only a child is updated");e=a.Q(b);if(e.P(d).Z(c.P(d))&&e.e()==c.e())return a;null!=f&&(c.e()?a.Da(b)?af(f,new S(Ie,e,b)):D(a.J(),"A child remove without an old child only makes sense on a leaf node"):e.e()?af(f,new S(Je,c,b)):af(f,new S(Fe,c,b,e)));return a.J()&&c.e()?a:a.T(b,c).lb(this.g)};
h.ya=function(a,b,c){null!=c&&(a.J()||a.O(H,function(a,e){b.Da(a)||af(c,new S(Ie,e,a))}),b.J()||b.O(H,function(b,e){if(a.Da(b)){var f=a.Q(b);f.Z(e)||af(c,new S(Fe,e,b,f))}else af(c,new S(Je,e,b))}));return b.lb(this.g)};h.fa=function(a,b){return a.e()?L:a.fa(b)};h.Ma=function(){return!1};h.Sb=function(){return this};function Pe(a){this.ee=new Ne(a.g);this.g=a.g;var b;a.ka?(b=bf(a),b=a.g.Bc(cf(a),b)):b=a.g.Ec();this.Rc=b;a.na?(b=df(a),a=a.g.Bc(ef(a),b)):a=a.g.Cc();this.sc=a}h=Pe.prototype;h.matches=function(a){return 0>=this.g.compare(this.Rc,a)&&0>=this.g.compare(a,this.sc)};h.F=function(a,b,c,d,e,f){this.matches(new C(b,c))||(c=L);return this.ee.F(a,b,c,d,e,f)};
h.ya=function(a,b,c){b.J()&&(b=L);var d=b.lb(this.g),d=d.fa(L),e=this;b.O(H,function(a,b){e.matches(new C(a,b))||(d=d.T(a,L))});return this.ee.ya(a,d,c)};h.fa=function(a){return a};h.Ma=function(){return!0};h.Sb=function(){return this.ee};function Oe(a){this.sa=new Pe(a);this.g=a.g;D(a.xa,"Only valid if limit has been set");this.oa=a.oa;this.Gb=!ff(a)}h=Oe.prototype;h.F=function(a,b,c,d,e,f){this.sa.matches(new C(b,c))||(c=L);return a.Q(b).Z(c)?a:a.Cb()<this.oa?this.sa.Sb().F(a,b,c,d,e,f):gf(this,a,b,c,e,f)};
h.ya=function(a,b,c){var d;if(b.J()||b.e())d=L.lb(this.g);else if(2*this.oa<b.Cb()&&b.vc(this.g)){d=L.lb(this.g);b=this.Gb?b.Xb(this.sa.sc,this.g):b.Vb(this.sa.Rc,this.g);for(var e=0;0<b.Oa.length&&e<this.oa;){var f=M(b),g;if(g=this.Gb?0>=this.g.compare(this.sa.Rc,f):0>=this.g.compare(f,this.sa.sc))d=d.T(f.name,f.R),e++;else break}}else{d=b.lb(this.g);d=d.fa(L);var k,m,l;if(this.Gb){b=d.Te(this.g);k=this.sa.sc;m=this.sa.Rc;var r=kc(this.g);l=function(a,b){return r(b,a)}}else b=d.Ub(this.g),k=this.sa.Rc,
m=this.sa.sc,l=kc(this.g);for(var e=0,y=!1;0<b.Oa.length;)f=M(b),!y&&0>=l(k,f)&&(y=!0),(g=y&&e<this.oa&&0>=l(f,m))?e++:d=d.T(f.name,L)}return this.sa.Sb().ya(a,d,c)};h.fa=function(a){return a};h.Ma=function(){return!0};h.Sb=function(){return this.sa.Sb()};
function gf(a,b,c,d,e,f){var g;if(a.Gb){var k=kc(a.g);g=function(a,b){return k(b,a)}}else g=kc(a.g);D(b.Cb()==a.oa,"");var m=new C(c,d),l=a.Gb?md(b,a.g):nd(b,a.g),r=a.sa.matches(m);if(b.Da(c)){for(var y=b.Q(c),l=e.ce(a.g,l,a.Gb);null!=l&&(l.name==c||b.Da(l.name));)l=e.ce(a.g,l,a.Gb);e=null==l?1:g(l,m);if(r&&!d.e()&&0<=e)return null!=f&&af(f,new S(Fe,d,c,y)),b.T(c,d);null!=f&&af(f,new S(Ie,y,c));b=b.T(c,L);return null!=l&&a.sa.matches(l)?(null!=f&&af(f,new S(Je,l.R,l.name)),b.T(l.name,l.R)):b}return d.e()?
b:r&&0<=g(l,m)?(null!=f&&(af(f,new S(Ie,l.R,l.name)),af(f,new S(Je,d,c))),b.T(c,d).T(l.name,L)):b};function S(a,b,c,d){this.type=a;this.Ia=b;this.Wa=c;this.oe=d;this.Bd=void 0}function Be(a){return new S(Ke,a)}var Je="child_added",Ie="child_removed",Fe="child_changed",Ge="child_moved",Ke="value";function ue(){this.eb={}}
function af(a,b){var c=b.type,d=b.Wa;D(c==Je||c==Fe||c==Ie,"Only child changes supported for tracking");D(".priority"!==d,"Only non-priority child changes can be tracked.");var e=w(a.eb,d);if(e){var f=e.type;if(c==Je&&f==Ie)a.eb[d]=new S(Fe,b.Ia,d,e.Ia);else if(c==Ie&&f==Je)delete a.eb[d];else if(c==Ie&&f==Fe)a.eb[d]=new S(Ie,e.oe,d);else if(c==Fe&&f==Je)a.eb[d]=new S(Je,b.Ia,d);else if(c==Fe&&f==Fe)a.eb[d]=new S(Fe,b.Ia,d,e.oe);else throw Jb("Illegal combination of changes: "+b+" occurred after "+
e);}else a.eb[d]=b};function hf(){this.Pb=this.na=this.Ib=this.ka=this.xa=!1;this.oa=0;this.kb="";this.bc=null;this.xb="";this.Zb=null;this.vb="";this.g=H}var jf=new hf;function ff(a){return""===a.kb?a.ka:"l"===a.kb}function cf(a){D(a.ka,"Only valid if start has been set");return a.bc}function bf(a){D(a.ka,"Only valid if start has been set");return a.Ib?a.xb:"[MIN_NAME]"}function ef(a){D(a.na,"Only valid if end has been set");return a.Zb}
function df(a){D(a.na,"Only valid if end has been set");return a.Pb?a.vb:"[MAX_NAME]"}function kf(a){var b=new hf;b.xa=a.xa;b.oa=a.oa;b.ka=a.ka;b.bc=a.bc;b.Ib=a.Ib;b.xb=a.xb;b.na=a.na;b.Zb=a.Zb;b.Pb=a.Pb;b.vb=a.vb;b.g=a.g;b.kb=a.kb;return b}h=hf.prototype;h.ke=function(a){var b=kf(this);b.xa=!0;b.oa=a;b.kb="l";return b};h.le=function(a){var b=kf(this);b.xa=!0;b.oa=a;b.kb="r";return b};h.Kd=function(a,b){var c=kf(this);c.ka=!0;n(a)||(a=null);c.bc=a;null!=b?(c.Ib=!0,c.xb=b):(c.Ib=!1,c.xb="");return c};
h.dd=function(a,b){var c=kf(this);c.na=!0;n(a)||(a=null);c.Zb=a;n(b)?(c.Pb=!0,c.vb=b):(c.Ag=!1,c.vb="");return c};function lf(a,b){var c=kf(a);c.g=b;return c}function mf(a){var b={};a.ka&&(b.sp=a.bc,a.Ib&&(b.sn=a.xb));a.na&&(b.ep=a.Zb,a.Pb&&(b.en=a.vb));if(a.xa){b.l=a.oa;var c=a.kb;""===c&&(c=ff(a)?"l":"r");b.vf=c}a.g!==H&&(b.i=a.g.toString());return b}function T(a){return!(a.ka||a.na||a.xa)}function nf(a){return T(a)&&a.g==H}
function of(a){var b={};if(nf(a))return b;var c;a.g===H?c="$priority":a.g===tc?c="$value":a.g===qc?c="$key":(D(a.g instanceof mc,"Unrecognized index type!"),c=a.g.toString());b.orderBy=x(c);a.ka&&(b.startAt=x(a.bc),a.Ib&&(b.startAt+=","+x(a.xb)));a.na&&(b.endAt=x(a.Zb),a.Pb&&(b.endAt+=","+x(a.vb)));a.xa&&(ff(a)?b.limitToFirst=a.oa:b.limitToLast=a.oa);return b}h.toString=function(){return x(mf(this))};function pf(a){this.W=a}var qf=new pf(new sd(null));function rf(a,b,c){if(b.e())return new pf(new sd(c));var d=wd(a.W,b);if(null!=d){var e=d.path,d=d.value;b=P(e,b);d=d.F(b,c);return new pf(a.W.set(e,d))}a=xd(a.W,b,new sd(c));return new pf(a)}function sf(a,b,c){var d=a;cb(c,function(a,c){d=rf(d,b.n(a),c)});return d}pf.prototype.Cd=function(a){if(a.e())return qf;a=xd(this.W,a,R);return new pf(a)};function tf(a,b){var c=wd(a.W,b);return null!=c?a.W.get(c.path).P(P(c.path,b)):null}
function uf(a){var b=[],c=a.W.value;null!=c?c.J()||c.O(H,function(a,c){b.push(new C(a,c))}):a.W.children.ha(function(a,c){null!=c.value&&b.push(new C(a,c.value))});return b}function vf(a,b){if(b.e())return a;var c=tf(a,b);return null!=c?new pf(new sd(c)):new pf(a.W.subtree(b))}pf.prototype.e=function(){return this.W.e()};pf.prototype.apply=function(a){return wf(Q,this.W,a)};
function wf(a,b,c){if(null!=b.value)return c.F(a,b.value);var d=null;b.children.ha(function(b,f){".priority"===b?(D(null!==f.value,"Priority writes must always be leaf nodes"),d=f.value):c=wf(a.n(b),f,c)});c.P(a).e()||null===d||(c=c.F(a.n(".priority"),d));return c};function xf(){this.Hd=L}xf.prototype.j=function(a){return this.Hd.P(a)};xf.prototype.toString=function(){return this.Hd.toString()};function yf(a){this.lc=a}yf.prototype.getToken=function(a){return this.lc.INTERNAL.getToken(a).then(null,function(a){return a&&"auth/token-not-initialized"===a.code?(I("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(a)})};function zf(a,b){a.lc.INTERNAL.addAuthTokenListener(b)};function Af(){this.S=qf;this.la=[];this.yc=-1}function Bf(a,b){for(var c=0;c<a.la.length;c++){var d=a.la[c];if(d.Wc===b)return d}return null}h=Af.prototype;
h.Cd=function(a){var b=Ea(this.la,function(b){return b.Wc===a});D(0<=b,"removeWrite called with nonexistent writeId.");var c=this.la[b];this.la.splice(b,1);for(var d=c.visible,e=!1,f=this.la.length-1;d&&0<=f;){var g=this.la[f];g.visible&&(f>=b&&Cf(g,c.path)?d=!1:c.path.contains(g.path)&&(e=!0));f--}if(d){if(e)this.S=Df(this.la,Ef,Q),this.yc=0<this.la.length?this.la[this.la.length-1].Wc:-1;else if(c.Fa)this.S=this.S.Cd(c.path);else{var k=this;v(c.children,function(a,b){k.S=k.S.Cd(c.path.n(b))})}return!0}return!1};
h.Aa=function(a,b,c,d){if(c||d){var e=vf(this.S,a);return!d&&e.e()?b:d||null!=b||null!=tf(e,Q)?(e=Df(this.la,function(b){return(b.visible||d)&&(!c||!(0<=xa(c,b.Wc)))&&(b.path.contains(a)||a.contains(b.path))},a),b=b||L,e.apply(b)):null}e=tf(this.S,a);if(null!=e)return e;e=vf(this.S,a);return e.e()?b:null!=b||null!=tf(e,Q)?(b=b||L,e.apply(b)):null};
h.oc=function(a,b){var c=L,d=tf(this.S,a);if(d)d.J()||d.O(H,function(a,b){c=c.T(a,b)});else if(b){var e=vf(this.S,a);b.O(H,function(a,b){var d=vf(e,new E(a)).apply(b);c=c.T(a,d)});ya(uf(e),function(a){c=c.T(a.name,a.R)})}else e=vf(this.S,a),ya(uf(e),function(a){c=c.T(a.name,a.R)});return c};h.Yc=function(a,b,c,d){D(c||d,"Either existingEventSnap or existingServerSnap must exist");a=a.n(b);if(null!=tf(this.S,a))return null;a=vf(this.S,a);return a.e()?d.P(b):a.apply(d.P(b))};
h.nc=function(a,b,c){a=a.n(b);var d=tf(this.S,a);return null!=d?d:ke(c,b)?vf(this.S,a).apply(c.j().Q(b)):null};h.ic=function(a){return tf(this.S,a)};h.Td=function(a,b,c,d,e,f){var g;a=vf(this.S,a);g=tf(a,Q);if(null==g)if(null!=b)g=a.apply(b);else return[];g=g.lb(f);if(g.e()||g.J())return[];b=[];a=kc(f);e=e?g.Xb(c,f):g.Vb(c,f);for(f=M(e);f&&b.length<d;)0!==a(f,c)&&b.push(f),f=M(e);return b};
function Cf(a,b){return a.Fa?a.path.contains(b):!!Pa(a.children,function(c,d){return a.path.n(d).contains(b)})}function Ef(a){return a.visible}
function Df(a,b,c){for(var d=qf,e=0;e<a.length;++e){var f=a[e];if(b(f)){var g=f.path;if(f.Fa)c.contains(g)?(g=P(c,g),d=rf(d,g,f.Fa)):g.contains(c)&&(g=P(g,c),d=rf(d,Q,f.Fa.P(g)));else if(f.children)if(c.contains(g))g=P(c,g),d=sf(d,g,f.children);else{if(g.contains(c))if(g=P(g,c),g.e())d=sf(d,Q,f.children);else if(f=w(f.children,K(g)))f=f.P(N(g)),d=rf(d,Q,f)}else throw Jb("WriteRecord should have .snap or .children");}}return d}function Ff(a,b){this.Jb=a;this.W=b}h=Ff.prototype;
h.Aa=function(a,b,c){return this.W.Aa(this.Jb,a,b,c)};h.oc=function(a){return this.W.oc(this.Jb,a)};h.Yc=function(a,b,c){return this.W.Yc(this.Jb,a,b,c)};h.ic=function(a){return this.W.ic(this.Jb.n(a))};h.Td=function(a,b,c,d,e){return this.W.Td(this.Jb,a,b,c,d,e)};h.nc=function(a,b){return this.W.nc(this.Jb,a,b)};h.n=function(a){return new Ff(this.Jb.n(a),this.W)};function Gf(a,b){this.qf={};this.Sc=new Hf(a);this.va=b;var c=1E4+2E4*Math.random();ec(q(this.jf,this),Math.floor(c))}Gf.prototype.jf=function(){var a=this.Sc.get(),b={},c=!1,d;for(d in a)0<a[d]&&bb(this.qf,d)&&(b[d]=a[d],c=!0);c&&this.va.we(b);ec(q(this.jf,this),Math.floor(6E5*Math.random()))};function If(){this.qc={}}function Jf(a,b,c){n(c)||(c=1);bb(a.qc,b)||(a.qc[b]=0);a.qc[b]+=c}If.prototype.get=function(){return Sa(this.qc)};function Hf(a){this.Df=a;this.od=null}Hf.prototype.get=function(){var a=this.Df.get(),b=Sa(a);if(this.od)for(var c in this.od)b[c]-=this.od[c];this.od=a;return b};var Kf={},Lf={};function Mf(a){a=a.toString();Kf[a]||(Kf[a]=new If);return Kf[a]}function Nf(a,b){var c=a.toString();Lf[c]||(Lf[c]=b());return Lf[c]};function Of(a,b,c){this.f=Qb("p:rest:");this.L=a;this.Eb=b;this.Xc=c;this.$={}}function Pf(a,b){if(n(b))return"tag$"+b;D(nf(a.m),"should have a tag if it's not a default query.");return a.path.toString()}h=Of.prototype;
h.Xe=function(a,b,c,d){var e=a.path.toString();this.f("Listen called for "+e+" "+a.ja());var f=Pf(a,c),g={};this.$[f]=g;a=of(a.m);var k=this;Qf(this,e+".json",a,function(a,b){var r=b;404===a&&(a=r=null);null===a&&k.Eb(e,r,!1,c);w(k.$,f)===g&&d(a?401==a?"permission_denied":"rest_error:"+a:"ok",null)})};h.tf=function(a,b){var c=Pf(a,b);delete this.$[c]};h.hf=function(){};h.pe=function(){};h.bf=function(){};h.vd=function(){};h.put=function(){};h.Ye=function(){};h.we=function(){};
function Qf(a,b,c,d){c=c||{};c.format="export";a.Xc.getToken(!1).then(function(e){(e=e&&e.accessToken)&&(c.auth=e);var f=(a.L.Pc?"https://":"http://")+a.L.host+b+"?"+db(c);a.f("Sending REST request for "+f);var g=new XMLHttpRequest;g.onreadystatechange=function(){if(d&&4===g.readyState){a.f("REST Response for "+f+" received. status:",g.status,"response:",g.responseText);var b=null;if(200<=g.status&&300>g.status){try{b=ib(g.responseText)}catch(c){J("Failed to parse JSON response for "+f+": "+g.responseText)}d(null,
b)}else 401!==g.status&&404!==g.status&&J("Got unsuccessful REST response for "+f+" Status: "+g.status),d(g.status);d=null}};g.open("GET",f,!0);g.send()})};function Rf(a){this.re=a;this.zd=[];this.Ob=0;this.Ud=-1;this.Db=null}function Sf(a,b,c){a.Ud=b;a.Db=c;a.Ud<a.Ob&&(a.Db(),a.Db=null)}function Tf(a,b,c){for(a.zd[b]=c;a.zd[a.Ob];){var d=a.zd[a.Ob];delete a.zd[a.Ob];for(var e=0;e<d.length;++e)if(d[e]){var f=a;cc(function(){f.re(d[e])})}if(a.Ob===a.Ud){a.Db&&(clearTimeout(a.Db),a.Db(),a.Db=null);break}a.Ob++}};var zb="websocket",Ab="long_polling";var Uf=null,Uf=require("faye-websocket").Client;function Vf(a,b,c,d){this.Vd=a;this.f=Qb(this.Vd);this.frames=this.wc=null;this.nb=this.ob=this.De=0;this.Ua=Mf(b);a={v:"5"};c&&(a.s=c);d&&(a.ls=d);this.Wd=yb(b,zb,a)}var Wf;
Vf.prototype.open=function(a,b){this.gb=b;this.Xf=a;this.f("Websocket connecting to "+this.Wd);this.tc=!1;ub.set("previous_websocket_failure",!0);try{var c={headers:{"User-Agent":"Firebase/5/"+firebase.SDK_VERSION+"/"+process.platform+"/Node"}},d=process.env,e=0==this.Wd.indexOf("wss://")?d.HTTPS_PROXY||d.https_proxy:d.HTTP_PROXY||d.http_proxy;e&&(c.proxy={origin:e});this.Ha=new Uf(this.Wd,[],c)}catch(f){this.f("Error instantiating WebSocket.");(c=f.message||f.data)&&this.f(c);this.ab();return}var g=
this;this.Ha.onopen=function(){g.f("Websocket connected.");g.tc=!0};this.Ha.onclose=function(){g.f("Websocket connection was disconnected.");g.Ha=null;g.ab()};this.Ha.onmessage=function(a){if(null!==g.Ha)if(a=a.data,g.nb+=a.length,Jf(g.Ua,"bytes_received",a.length),Xf(g),null!==g.frames)Yf(g,a);else{a:{D(null===g.frames,"We already have a frame buffer");if(6>=a.length){var b=Number(a);if(!isNaN(b)){g.De=b;g.frames=[];a=null;break a}}g.De=1;g.frames=[]}null!==a&&Yf(g,a)}};this.Ha.onerror=function(a){g.f("WebSocket error.  Closing connection.");
(a=a.message||a.data)&&g.f(a);g.ab()}};Vf.prototype.start=function(){};Vf.isAvailable=function(){var a=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var b=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);b&&1<b.length&&4.4>parseFloat(b[1])&&(a=!0)}return!a&&null!==Uf&&!Wf};Vf.responsesRequiredToBeHealthy=2;Vf.healthyTimeout=3E4;h=Vf.prototype;h.pd=function(){ub.remove("previous_websocket_failure")};
function Yf(a,b){a.frames.push(b);if(a.frames.length==a.De){var c=a.frames.join("");a.frames=null;c=ib(c);a.Xf(c)}}h.send=function(a){Xf(this);a=x(a);this.ob+=a.length;Jf(this.Ua,"bytes_sent",a.length);a=Zb(a,16384);1<a.length&&Zf(this,String(a.length));for(var b=0;b<a.length;b++)Zf(this,a[b])};h.Qc=function(){this.yb=!0;this.wc&&(clearInterval(this.wc),this.wc=null);this.Ha&&(this.Ha.close(),this.Ha=null)};
h.ab=function(){this.yb||(this.f("WebSocket is closing itself"),this.Qc(),this.gb&&(this.gb(this.tc),this.gb=null))};h.close=function(){this.yb||(this.f("WebSocket is being closed"),this.Qc())};function Xf(a){clearInterval(a.wc);a.wc=setInterval(function(){a.Ha&&Zf(a,"0");Xf(a)},Math.floor(45E3))}function Zf(a,b){try{a.Ha.send(b)}catch(c){a.f("Exception thrown from WebSocket.send():",c.message||c.data,"Closing connection."),setTimeout(q(a.ab,a),0)}};function $f(a,b,c,d){this.Vd=a;this.f=Qb(a);this.gc=b;this.nb=this.ob=0;this.Ua=Mf(b);this.sf=c;this.tc=!1;this.Ab=d;this.Vc=function(a){return yb(b,Ab,a)}}var ag,bg;
$f.prototype.open=function(a,b){this.Ke=0;this.ia=b;this.af=new Rf(a);this.yb=!1;var c=this;this.qb=setTimeout(function(){c.f("Timed out trying to connect.");c.ab();c.qb=null},Math.floor(3E4));Vb(function(){if(!c.yb){c.Sa=new cg(function(a,b,d,k,m){dg(c,arguments);if(c.Sa)if(c.qb&&(clearTimeout(c.qb),c.qb=null),c.tc=!0,"start"==a)c.id=b,c.fg=d;else if("close"===a)b?(c.Sa.of=!1,Sf(c.af,b,function(){c.ab()})):c.ab();else throw Error("Unrecognized command received: "+a);},function(a,b){dg(c,arguments);
Tf(c.af,a,b)},function(){c.ab()},c.Vc);var a={start:"t"};a.ser=Math.floor(1E8*Math.random());c.Sa.sg&&(a.cb=c.Sa.sg);a.v="5";c.sf&&(a.s=c.sf);c.Ab&&(a.ls=c.Ab);a=c.Vc(a);c.f("Connecting via long-poll to "+a);eg(c.Sa,a,function(){})}})};$f.prototype.start=function(){var a=this.Sa,b=this.fg;a.me=this.id;a.$e=b;for(a.Qd=!0;fg(a););};
$f.isAvailable=function(){return ag||!bg&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.ug)&&!1};h=$f.prototype;h.pd=function(){};h.Qc=function(){this.yb=!0;this.Sa&&(this.Sa.close(),this.Sa=null);this.Ze&&(document.body.removeChild(this.Ze),this.Ze=null);this.qb&&(clearTimeout(this.qb),this.qb=null)};
h.ab=function(){this.yb||(this.f("Longpoll is closing itself"),this.Qc(),this.ia&&(this.ia(this.tc),this.ia=null))};h.close=function(){this.yb||(this.f("Longpoll is being closed."),this.Qc())};h.send=function(a){a=x(a);this.ob+=a.length;Jf(this.Ua,"bytes_sent",a.length);a=jb(a);a=Za(a,!0);a=Zb(a,1840);for(var b=0;b<a.length;b++){var c=this.Sa;c.Nc.push({lg:this.Ke,rg:a.length,Me:a[b]});c.Qd&&fg(c);this.Ke++}};function dg(a,b){var c=x(b).length;a.nb+=c;Jf(a.Ua,"bytes_received",c)}
function cg(a,b,c,d){this.Vc=d;this.gb=c;this.te=new Dc;this.Nc=[];this.Xd=Math.floor(1E8*Math.random());this.of=!0;this.Ef=a;this.Yf=b}cg.prototype.close=function(){this.Qd=!1;if(this.rd){this.rd.wg.body.innerHTML="";var a=this;setTimeout(function(){null!==a.rd&&(document.body.removeChild(a.rd),a.rd=null)},Math.floor(0))}if(this.me){var b={disconn:"t"};b.id=this.me;b.pw=this.$e;b=this.Vc(b);gg(b)}if(b=this.gb)this.gb=null,b()};
function fg(a){if(a.Qd&&a.of&&a.te.count()<(0<a.Nc.length?2:1)){a.Xd++;var b={};b.id=a.me;b.pw=a.$e;b.ser=a.Xd;for(var b=a.Vc(b),c="",d=0;0<a.Nc.length;)if(1870>=a.Nc[0].Me.length+30+c.length){var e=a.Nc.shift(),c=c+"&seg"+d+"="+e.lg+"&ts"+d+"="+e.rg+"&d"+d+"="+e.Me;d++}else break;hg(a,b+c,a.Xd);return!0}return!1}function hg(a,b,c){function d(){a.te.remove(c);fg(a)}a.te.add(c,1);var e=setTimeout(d,Math.floor(25E3));eg(a,b,function(){clearTimeout(e);d()})}function eg(a,b,c){a.Hf(b,c)}var ig=null;
function gg(a,b){ig||(ig=require("request"));ig(a,function(c,d,e){if(c)throw"Rest request for "+a.url+" failed.";b&&b(e)})}cg.prototype.Hf=function(a,b){var c=this;gg({url:a,xg:!0},function(a){c.Kf(a);b()})};cg.prototype.Kf=function(a){eval("var jsonpCB = function(pLPCommand, pRTLPCB) {"+a+"}");jsonpCB(this.Ef,this.Yf)};function jg(a){kg(this,a)}var lg=[$f,Vf];function kg(a,b){var c=Vf&&Vf.isAvailable(),d=c&&!(ub.We||!0===ub.get("previous_websocket_failure"));b.tg&&(c||J("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),d=!0);if(d)a.Tc=[Vf];else{var e=a.Tc=[];$b(lg,function(a,b){b&&b.isAvailable()&&e.push(b)})}}function mg(a){if(0<a.Tc.length)return a.Tc[0];throw Error("No transports available");};function ng(a,b,c,d,e,f,g){this.id=a;this.f=Qb("c:"+this.id+":");this.re=c;this.Ic=d;this.ia=e;this.qe=f;this.L=b;this.yd=[];this.Ie=0;this.rf=new jg(b);this.Ta=0;this.Ab=g;this.f("Connection created");og(this)}
function og(a){var b=mg(a.rf);a.I=new b("c:"+a.id+":"+a.Ie++,a.L,void 0,a.Ab);a.ve=b.responsesRequiredToBeHealthy||0;var c=pg(a,a.I),d=qg(a,a.I);a.Uc=a.I;a.Oc=a.I;a.D=null;a.zb=!1;setTimeout(function(){a.I&&a.I.open(c,d)},Math.floor(0));b=b.healthyTimeout||0;0<b&&(a.jd=ec(function(){a.jd=null;a.zb||(a.I&&102400<a.I.nb?(a.f("Connection exceeded healthy timeout but has received "+a.I.nb+" bytes.  Marking connection healthy."),a.zb=!0,a.I.pd()):a.I&&10240<a.I.ob?a.f("Connection exceeded healthy timeout but has sent "+
a.I.ob+" bytes.  Leaving connection alive."):(a.f("Closing unhealthy connection after timeout."),a.close()))},Math.floor(b)))}function qg(a,b){return function(c){b===a.I?(a.I=null,c||0!==a.Ta?1===a.Ta&&a.f("Realtime connection lost."):(a.f("Realtime connection failed."),"s-"===a.L.Za.substr(0,2)&&(ub.remove("host:"+a.L.host),a.L.Za=a.L.host)),a.close()):b===a.D?(a.f("Secondary connection lost."),c=a.D,a.D=null,a.Uc!==c&&a.Oc!==c||a.close()):a.f("closing an old connection")}}
function pg(a,b){return function(c){if(2!=a.Ta)if(b===a.Oc){var d=Xb("t",c);c=Xb("d",c);if("c"==d){if(d=Xb("t",c),"d"in c)if(c=c.d,"h"===d){var d=c.ts,e=c.v,f=c.h;a.pf=c.s;xb(a.L,f);0==a.Ta&&(a.I.start(),rg(a,a.I,d),"5"!==e&&J("Protocol version mismatch detected"),c=a.rf,(c=1<c.Tc.length?c.Tc[1]:null)&&sg(a,c))}else if("n"===d){a.f("recvd end transmission on primary");a.Oc=a.D;for(c=0;c<a.yd.length;++c)a.ud(a.yd[c]);a.yd=[];tg(a)}else"s"===d?(a.f("Connection shutdown command received. Shutting down..."),
a.qe&&(a.qe(c),a.qe=null),a.ia=null,a.close()):"r"===d?(a.f("Reset packet received.  New host: "+c),xb(a.L,c),1===a.Ta?a.close():(ug(a),og(a))):"e"===d?Rb("Server Error: "+c):"o"===d?(a.f("got pong on primary."),vg(a),wg(a)):Rb("Unknown control packet command: "+d)}else"d"==d&&a.ud(c)}else if(b===a.D)if(d=Xb("t",c),c=Xb("d",c),"c"==d)"t"in c&&(c=c.t,"a"===c?xg(a):"r"===c?(a.f("Got a reset on secondary, closing it"),a.D.close(),a.Uc!==a.D&&a.Oc!==a.D||a.close()):"o"===c&&(a.f("got pong on secondary."),
a.nf--,xg(a)));else if("d"==d)a.yd.push(c);else throw Error("Unknown protocol layer: "+d);else a.f("message on old connection")}}ng.prototype.ua=function(a){yg(this,{t:"d",d:a})};function tg(a){a.Uc===a.D&&a.Oc===a.D&&(a.f("cleaning up and promoting a connection: "+a.D.Vd),a.I=a.D,a.D=null)}
function xg(a){0>=a.nf?(a.f("Secondary connection is healthy."),a.zb=!0,a.D.pd(),a.D.start(),a.f("sending client ack on secondary"),a.D.send({t:"c",d:{t:"a",d:{}}}),a.f("Ending transmission on primary"),a.I.send({t:"c",d:{t:"n",d:{}}}),a.Uc=a.D,tg(a)):(a.f("sending ping on secondary."),a.D.send({t:"c",d:{t:"p",d:{}}}))}ng.prototype.ud=function(a){vg(this);this.re(a)};function vg(a){a.zb||(a.ve--,0>=a.ve&&(a.f("Primary connection is healthy."),a.zb=!0,a.I.pd()))}
function sg(a,b){a.D=new b("c:"+a.id+":"+a.Ie++,a.L,a.pf);a.nf=b.responsesRequiredToBeHealthy||0;a.D.open(pg(a,a.D),qg(a,a.D));ec(function(){a.D&&(a.f("Timed out trying to upgrade."),a.D.close())},Math.floor(6E4))}function rg(a,b,c){a.f("Realtime connection established.");a.I=b;a.Ta=1;a.Ic&&(a.Ic(c,a.pf),a.Ic=null);0===a.ve?(a.f("Primary connection is healthy."),a.zb=!0):ec(function(){wg(a)},Math.floor(5E3))}
function wg(a){a.zb||1!==a.Ta||(a.f("sending ping on primary."),yg(a,{t:"c",d:{t:"p",d:{}}}))}function yg(a,b){if(1!==a.Ta)throw"Connection is not connected";a.Uc.send(b)}ng.prototype.close=function(){2!==this.Ta&&(this.f("Closing realtime connection."),this.Ta=2,ug(this),this.ia&&(this.ia(),this.ia=null))};function ug(a){a.f("Shutting down all connections");a.I&&(a.I.close(),a.I=null);a.D&&(a.D.close(),a.D=null);a.jd&&(clearTimeout(a.jd),a.jd=null)};function zg(a,b,c,d,e,f){this.id=Ag++;this.f=Qb("p:"+this.id+":");this.nd={};this.$={};this.pa=[];this.Lc=0;this.Hc=[];this.ma=!1;this.Ra=1E3;this.qd=3E5;this.Eb=b;this.Gc=c;this.se=d;this.L=a;this.mb=this.Ea=this.Ab=this.xe=null;this.Xc=e;this.ae=!1;this.he=0;this.Rd=f;this.sb=null;this.Kb=!1;this.Ed={};this.kg=0;this.Oe=!0;this.xc=this.je=null;Bg(this,0);Jc.Tb().dc("visible",this.$f,this);-1===a.host.indexOf("fblocal")&&Ic.Tb().dc("online",this.Zf,this)}var Ag=0,Cg=0;h=zg.prototype;
h.ua=function(a,b,c){var d=++this.kg;a={r:d,a:a,b:b};this.f(x(a));D(this.ma,"sendRequest call when we're not connected not allowed.");this.Ea.ua(a);c&&(this.Ed[d]=c)};h.Xe=function(a,b,c,d){var e=a.ja(),f=a.path.toString();this.f("Listen called for "+f+" "+e);this.$[f]=this.$[f]||{};D(nf(a.m)||!T(a.m),"listen() called for non-default but complete query");D(!this.$[f][e],"listen() called twice for same path/queryId.");a={G:d,hd:b,gg:a,tag:c};this.$[f][e]=a;this.ma&&Dg(this,a)};
function Dg(a,b){var c=b.gg,d=c.path.toString(),e=c.ja();a.f("Listen on "+d+" for "+e);var f={p:d};b.tag&&(f.q=mf(c.m),f.t=b.tag);f.h=b.hd();a.ua("q",f,function(f){var k=f.d,m=f.s;if(k&&"object"===typeof k&&bb(k,"w")){var l=w(k,"w");ea(l)&&0<=xa(l,"no_index")&&J("Using an unspecified index. Consider adding "+('".indexOn": "'+c.m.g.toString()+'"')+" at "+c.path.toString()+" to your security rules for better performance")}(a.$[d]&&a.$[d][e])===b&&(a.f("listen response",f),"ok"!==m&&Eg(a,d,e),b.G&&b.G(m,
k))})}h.hf=function(a){this.mb=a;this.f("Auth token refreshed");this.mb?Fg(this):this.ma&&this.ua("unauth",{},function(){});if(a&&40===a.length||hc(a))this.f("Admin auth credential detected.  Reducing max reconnect time."),this.qd=3E4};function Fg(a){if(a.ma&&a.mb){var b=a.mb,c=gc(b)?"auth":"gauth",d={cred:b};null===a.Rd?d.noauth=!0:"object"===typeof a.Rd&&(d.authvar=a.Rd);a.ua(c,d,function(c){var d=c.s;c=c.d||"error";a.mb===b&&("ok"===d?a.he=0:Gg(a,d,c))})}}
h.tf=function(a,b){var c=a.path.toString(),d=a.ja();this.f("Unlisten called for "+c+" "+d);D(nf(a.m)||!T(a.m),"unlisten() called for non-default but complete query");if(Eg(this,c,d)&&this.ma){var e=mf(a.m);this.f("Unlisten on "+c+" for "+d);c={p:c};b&&(c.q=e,c.t=b);this.ua("n",c)}};h.pe=function(a,b,c){this.ma?Hg(this,"o",a,b,c):this.Hc.push({ue:a,action:"o",data:b,G:c})};h.bf=function(a,b,c){this.ma?Hg(this,"om",a,b,c):this.Hc.push({ue:a,action:"om",data:b,G:c})};
h.vd=function(a,b){this.ma?Hg(this,"oc",a,null,b):this.Hc.push({ue:a,action:"oc",data:null,G:b})};function Hg(a,b,c,d,e){c={p:c,d:d};a.f("onDisconnect "+b,c);a.ua(b,c,function(a){e&&setTimeout(function(){e(a.s,a.d)},Math.floor(0))})}h.put=function(a,b,c,d){Ig(this,"p",a,b,c,d)};h.Ye=function(a,b,c,d){Ig(this,"m",a,b,c,d)};function Ig(a,b,c,d,e,f){d={p:c,d:d};n(f)&&(d.h=f);a.pa.push({action:b,kf:d,G:e});a.Lc++;b=a.pa.length-1;a.ma?Jg(a,b):a.f("Buffering put: "+c)}
function Jg(a,b){var c=a.pa[b].action,d=a.pa[b].kf,e=a.pa[b].G;a.pa[b].hg=a.ma;a.ua(c,d,function(d){a.f(c+" response",d);delete a.pa[b];a.Lc--;0===a.Lc&&(a.pa=[]);e&&e(d.s,d.d)})}h.we=function(a){this.ma&&(a={c:a},this.f("reportStats",a),this.ua("s",a,function(a){"ok"!==a.s&&this.f("reportStats","Error sending stats: "+a.d)}))};
h.ud=function(a){if("r"in a){this.f("from server: "+x(a));var b=a.r,c=this.Ed[b];c&&(delete this.Ed[b],c(a.b))}else{if("error"in a)throw"A server-side error has occurred: "+a.error;"a"in a&&(b=a.a,a=a.b,this.f("handleServerMessage",b,a),"d"===b?this.Eb(a.p,a.d,!1,a.t):"m"===b?this.Eb(a.p,a.d,!0,a.t):"c"===b?Kg(this,a.p,a.q):"ac"===b?Gg(this,a.s,a.d):"sd"===b?this.xe?this.xe(a):"msg"in a&&"undefined"!==typeof console&&console.log("FIREBASE: "+a.msg.replace("\n","\nFIREBASE: ")):Rb("Unrecognized action received from server: "+
x(b)+"\nAre you using the latest client?"))}};h.Ic=function(a,b){this.f("connection ready");this.ma=!0;this.xc=(new Date).getTime();this.se({serverTimeOffset:a-(new Date).getTime()});this.Ab=b;if(this.Oe){var c={};c["sdk.node."+firebase.SDK_VERSION.replace(/\./g,"-")]=1;mb()?c["framework.cordova"]=1:"object"===typeof navigator&&"ReactNative"===navigator.product&&(c["framework.reactnative"]=1);this.we(c)}Lg(this);this.Oe=!1;this.Gc(!0)};
function Bg(a,b){D(!a.Ea,"Scheduling a connect when we're already connected/ing?");a.sb&&clearTimeout(a.sb);a.sb=setTimeout(function(){a.sb=null;Mg(a)},Math.floor(b))}h.$f=function(a){a&&!this.Kb&&this.Ra===this.qd&&(this.f("Window became visible.  Reducing delay."),this.Ra=1E3,this.Ea||Bg(this,0));this.Kb=a};h.Zf=function(a){a?(this.f("Browser went online."),this.Ra=1E3,this.Ea||Bg(this,0)):(this.f("Browser went offline.  Killing connection."),this.Ea&&this.Ea.close())};
h.cf=function(){this.f("data client disconnected");this.ma=!1;this.Ea=null;for(var a=0;a<this.pa.length;a++){var b=this.pa[a];b&&"h"in b.kf&&b.hg&&(b.G&&b.G("disconnect"),delete this.pa[a],this.Lc--)}0===this.Lc&&(this.pa=[]);this.Ed={};Ng(this)&&(this.Kb?this.xc&&(3E4<(new Date).getTime()-this.xc&&(this.Ra=1E3),this.xc=null):(this.f("Window isn't visible.  Delaying reconnect."),this.Ra=this.qd,this.je=(new Date).getTime()),a=Math.max(0,this.Ra-((new Date).getTime()-this.je)),a*=Math.random(),this.f("Trying to reconnect in "+
a+"ms"),Bg(this,a),this.Ra=Math.min(this.qd,1.3*this.Ra));this.Gc(!1)};
function Mg(a){if(Ng(a)){a.f("Making a connection attempt");a.je=(new Date).getTime();a.xc=null;var b=q(a.ud,a),c=q(a.Ic,a),d=q(a.cf,a),e=a.id+":"+Cg++,f=a.Ab,g=!1,k=null,m=function(){k?k.close():(g=!0,d())};a.Ea={close:m,ua:function(a){D(k,"sendRequest call when we're not connected not allowed.");k.ua(a)}};var l=a.ae;a.ae=!1;a.Xc.getToken(l).then(function(l){g?I("getToken() completed but was canceled"):(I("getToken() completed. Creating connection."),a.mb=l&&l.accessToken,k=new ng(e,a.L,b,c,d,function(b){J(b+
" ("+a.L.toString()+")");a.$a("server_kill")},f))}).then(null,function(b){a.f("Failed to get token: "+b);g||m()})}}h.$a=function(a){I("Interrupting connection for reason: "+a);this.nd[a]=!0;this.Ea?this.Ea.close():(this.sb&&(clearTimeout(this.sb),this.sb=null),this.ma&&this.cf())};h.hc=function(a){I("Resuming connection for reason: "+a);delete this.nd[a];Ra(this.nd)&&(this.Ra=1E3,this.Ea||Bg(this,0))};
function Kg(a,b,c){c=c?Aa(c,function(a){return Yb(a)}).join("$"):"default";(a=Eg(a,b,c))&&a.G&&a.G("permission_denied")}function Eg(a,b,c){b=(new E(b)).toString();var d;n(a.$[b])?(d=a.$[b][c],delete a.$[b][c],0===Ka(a.$[b])&&delete a.$[b]):d=void 0;return d}
function Gg(a,b,c){I("Auth token revoked: "+b+"/"+c);a.mb=null;a.ae=!0;a.Ea.close();if("invalid_token"===b||"permission_denied"===b)a.he++,3<=a.he&&(a.Ra=3E4,a=a.Xc,b='Provided authentication credentials for the app named "'+a.lc.name+'" are invalid. This usually indicates your app was not initialized correctly. ',b="credential"in a.lc.options?b+'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in
a.lc.options?b+'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':b+'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',J(b))}
function Lg(a){Fg(a);v(a.$,function(b){v(b,function(b){Dg(a,b)})});for(var b=0;b<a.pa.length;b++)a.pa[b]&&Jg(a,b);for(;a.Hc.length;)b=a.Hc.shift(),Hg(a,b.action,b.ue,b.data,b.G)}function Ng(a){var b;b=Ic.Tb().ec;return Ra(a.nd)&&b};function Og(a){a instanceof Pg||Sb("Don't call new Database() directly - please use firebase.database().");this.ta=a;this.ba=new U(a,Q);this.INTERNAL=new Qg(this)}var Rg={TIMESTAMP:{".sv":"timestamp"}};h=Og.prototype;h.app=null;h.gf=function(a){Sg(this,"ref");z("database.ref",0,1,arguments.length);return n(a)?this.ba.n(a):this.ba};
h.ig=function(a){Sg(this,"database.refFromURL");z("database.refFromURL",1,1,arguments.length);var b=Tb(a);Ud("database.refFromURL",b);var c=b.gc;c.host!==this.ta.L.host&&Sb("database.refFromURL: Host name does not match the current database: (found "+c.host+" but expected "+this.ta.L.host+")");return this.gf(b.path.toString())};function Sg(a,b){null===a.ta&&Sb("Cannot call "+b+" on a deleted database.")}h.Rf=function(){z("database.goOffline",0,0,arguments.length);Sg(this,"goOffline");this.ta.$a()};
h.Sf=function(){z("database.goOnline",0,0,arguments.length);Sg(this,"goOnline");this.ta.hc()};Object.defineProperty(Og.prototype,"app",{get:function(){return this.ta.app}});function Qg(a){this.Xa=a}Qg.prototype.delete=function(){Sg(this.Xa,"delete");var a=Tg.Tb(),b=this.Xa.ta;w(a.jb,b.app.name)!==b&&Sb("Database "+b.app.name+" has already been deleted.");b.$a();delete a.jb[b.app.name];this.Xa.ta=null;this.Xa.ba=null;this.Xa=this.Xa.INTERNAL=null;return firebase.Promise.resolve()};
Og.prototype.ref=Og.prototype.gf;Og.prototype.refFromURL=Og.prototype.ig;Og.prototype.goOnline=Og.prototype.Sf;Og.prototype.goOffline=Og.prototype.Rf;Qg.prototype["delete"]=Qg.prototype.delete;function V(a,b,c){this.A=a;this.V=b;this.g=c}V.prototype.H=function(){z("Firebase.DataSnapshot.val",0,0,arguments.length);return this.A.H()};V.prototype.val=V.prototype.H;V.prototype.Zd=function(){z("Firebase.DataSnapshot.exportVal",0,0,arguments.length);return this.A.H(!0)};V.prototype.exportVal=V.prototype.Zd;V.prototype.toJSON=function(){z("Firebase.DataSnapshot.toJSON",0,1,arguments.length);return this.Zd()};V.prototype.toJSON=V.prototype.toJSON;
V.prototype.Nf=function(){z("Firebase.DataSnapshot.exists",0,0,arguments.length);return!this.A.e()};V.prototype.exists=V.prototype.Nf;V.prototype.n=function(a){z("Firebase.DataSnapshot.child",0,1,arguments.length);ga(a)&&(a=String(a));Sd("Firebase.DataSnapshot.child",a);var b=new E(a),c=this.V.n(b);return new V(this.A.P(b),c,H)};V.prototype.child=V.prototype.n;
V.prototype.Da=function(a){z("Firebase.DataSnapshot.hasChild",1,1,arguments.length);Sd("Firebase.DataSnapshot.hasChild",a);var b=new E(a);return!this.A.P(b).e()};V.prototype.hasChild=V.prototype.Da;V.prototype.C=function(){z("Firebase.DataSnapshot.getPriority",0,0,arguments.length);return this.A.C().H()};V.prototype.getPriority=V.prototype.C;
V.prototype.forEach=function(a){z("Firebase.DataSnapshot.forEach",1,1,arguments.length);B("Firebase.DataSnapshot.forEach",1,a,!1);if(this.A.J())return!1;var b=this;return!!this.A.O(this.g,function(c,d){return a(new V(d,b.V.n(c),H))})};V.prototype.forEach=V.prototype.forEach;V.prototype.gd=function(){z("Firebase.DataSnapshot.hasChildren",0,0,arguments.length);return this.A.J()?!1:!this.A.e()};V.prototype.hasChildren=V.prototype.gd;
V.prototype.getKey=function(){z("Firebase.DataSnapshot.key",0,0,arguments.length);return this.V.getKey()};dc(V.prototype,"key",V.prototype.getKey);V.prototype.Cb=function(){z("Firebase.DataSnapshot.numChildren",0,0,arguments.length);return this.A.Cb()};V.prototype.numChildren=V.prototype.Cb;V.prototype.ub=function(){z("Firebase.DataSnapshot.ref",0,0,arguments.length);return this.V};dc(V.prototype,"ref",V.prototype.ub);function Ug(a,b,c){this.Nb=a;this.pb=b;this.rb=c||null}h=Ug.prototype;h.lf=function(a){return"value"===a};h.createEvent=function(a,b){var c=b.m.g;return new Te("value",this,new V(a.Ia,b.ub(),c))};h.Rb=function(a){var b=this.rb;if("cancel"===a.de()){D(this.pb,"Raising a cancel event on a listener with no cancel callback");var c=this.pb;return function(){c.call(b,a.error)}}var d=this.Nb;return function(){d.call(b,a.Jd)}};h.Je=function(a,b){return this.pb?new Ue(this,a,b):null};
h.matches=function(a){return a instanceof Ug?a.Nb&&this.Nb?a.Nb===this.Nb&&a.rb===this.rb:!0:!1};h.Ue=function(){return null!==this.Nb};function Vg(a,b,c){this.ga=a;this.pb=b;this.rb=c}h=Vg.prototype;h.lf=function(a){a="children_added"===a?"child_added":a;return("children_removed"===a?"child_removed":a)in this.ga};h.Je=function(a,b){return this.pb?new Ue(this,a,b):null};
h.createEvent=function(a,b){D(null!=a.Wa,"Child events should have a childName.");var c=b.ub().n(a.Wa);return new Te(a.type,this,new V(a.Ia,c,b.m.g),a.Bd)};h.Rb=function(a){var b=this.rb;if("cancel"===a.de()){D(this.pb,"Raising a cancel event on a listener with no cancel callback");var c=this.pb;return function(){c.call(b,a.error)}}var d=this.ga[a.ed];return function(){d.call(b,a.Jd,a.Bd)}};
h.matches=function(a){if(a instanceof Vg){if(!this.ga||!a.ga)return!0;if(this.rb===a.rb){var b=Ka(a.ga);if(b===Ka(this.ga)){if(1===b){var b=La(a.ga),c=La(this.ga);return c===b&&(!a.ga[b]||!this.ga[c]||a.ga[b]===this.ga[c])}return Ja(this.ga,function(b,c){return a.ga[c]===b})}}}return!1};h.Ue=function(){return null!==this.ga};function Wg(){this.za={}}h=Wg.prototype;h.e=function(){return Ra(this.za)};h.bb=function(a,b,c){var d=a.source.Fb;if(null!==d)return d=w(this.za,d),D(null!=d,"SyncTree gave us an op for an invalid query."),d.bb(a,b,c);var e=[];v(this.za,function(d){e=e.concat(d.bb(a,b,c))});return e};h.Lb=function(a,b,c,d,e){var f=a.ja(),g=w(this.za,f);if(!g){var g=c.Aa(e?d:null),k=!1;g?k=!0:(g=d instanceof O?c.oc(d):L,k=!1);g=new Me(a,new le(new ge(g,k,!1),new ge(d,e,!1)));this.za[f]=g}g.Lb(b);return Se(g,b)};
h.ib=function(a,b,c){var d=a.ja(),e=[],f=[],g=null!=Xg(this);if("default"===d){var k=this;v(this.za,function(a,d){f=f.concat(a.ib(b,c));a.e()&&(delete k.za[d],T(a.V.m)||e.push(a.V))})}else{var m=w(this.za,d);m&&(f=f.concat(m.ib(b,c)),m.e()&&(delete this.za[d],T(m.V.m)||e.push(m.V)))}g&&null==Xg(this)&&e.push(new U(a.u,a.path));return{jg:e,Mf:f}};function Yg(a){return za(Ma(a.za),function(a){return!T(a.V.m)})}h.fb=function(a){var b=null;v(this.za,function(c){b=b||c.fb(a)});return b};
function Zg(a,b){if(T(b.m))return Xg(a);var c=b.ja();return w(a.za,c)}function Xg(a){return Qa(a.za,function(a){return T(a.V.m)})||null};function $g(a){this.wa=R;this.hb=new Af;this.Be={};this.fc={};this.zc=a}function ah(a,b,c,d,e){var f=a.hb,g=e;D(d>f.yc,"Stacking an older write on top of newer ones");n(g)||(g=!0);f.la.push({path:b,Fa:c,Wc:d,visible:g});g&&(f.S=rf(f.S,b,c));f.yc=d;return e?bh(a,new $d(ce,b,c)):[]}function ch(a,b,c,d){var e=a.hb;D(d>e.yc,"Stacking an older merge on top of newer ones");e.la.push({path:b,children:c,Wc:d,visible:!0});e.S=sf(e.S,b,c);e.yc=d;c=ud(c);return bh(a,new Yd(ce,b,c))}
function dh(a,b,c){c=c||!1;var d=Bf(a.hb,b);if(a.hb.Cd(b)){var e=R;null!=d.Fa?e=e.set(Q,!0):cb(d.children,function(a,b){e=e.set(new E(a),b)});return bh(a,new ae(d.path,e,c))}return[]}function eh(a,b,c){c=ud(c);return bh(a,new Yd(fe,b,c))}function fh(a,b,c,d){d=gh(a,d);if(null!=d){var e=hh(d);d=e.path;e=e.Fb;b=P(d,b);c=new $d(new ee(!1,!0,e,!0),b,c);return ih(a,d,c)}return[]}
function jh(a,b,c,d){if(d=gh(a,d)){var e=hh(d);d=e.path;e=e.Fb;b=P(d,b);c=ud(c);c=new Yd(new ee(!1,!0,e,!0),b,c);return ih(a,d,c)}return[]}
$g.prototype.Lb=function(a,b){var c=a.path,d=null,e=!1;Cd(this.wa,c,function(a,b){var f=P(a,c);d=d||b.fb(f);e=e||null!=Xg(b)});var f=this.wa.get(c);f?(e=e||null!=Xg(f),d=d||f.fb(Q)):(f=new Wg,this.wa=this.wa.set(c,f));var g;null!=d?g=!0:(g=!1,d=L,Gd(this.wa.subtree(c),function(a,b){var c=b.fb(Q);c&&(d=d.T(a,c))}));var k=null!=Zg(f,a);if(!k&&!T(a.m)){var m=kh(a);D(!(m in this.fc),"View does not exist, but we have a tag");var l=lh++;this.fc[m]=l;this.Be["_"+l]=m}g=f.Lb(a,b,new Ff(c,this.hb),d,g);k||
e||(f=Zg(f,a),g=g.concat(mh(this,a,f)));return g};
$g.prototype.ib=function(a,b,c){var d=a.path,e=this.wa.get(d),f=[];if(e&&("default"===a.ja()||null!=Zg(e,a))){f=e.ib(a,b,c);e.e()&&(this.wa=this.wa.remove(d));e=f.jg;f=f.Mf;b=-1!==Ea(e,function(a){return T(a.m)});var g=Ad(this.wa,d,function(a,b){return null!=Xg(b)});if(b&&!g&&(d=this.wa.subtree(d),!d.e()))for(var d=nh(d),k=0;k<d.length;++k){var m=d[k],l=m.V,m=oh(this,m);this.zc.ye(ph(l),qh(this,l),m.hd,m.G)}if(!g&&0<e.length&&!c)if(b)this.zc.Ld(ph(a),null);else{var r=this;ya(e,function(a){a.ja();
var b=r.fc[kh(a)];r.zc.Ld(ph(a),b)})}rh(this,e)}return f};$g.prototype.Aa=function(a,b){var c=this.hb,d=Ad(this.wa,a,function(b,c){var d=P(b,a);if(d=c.fb(d))return d});return c.Aa(a,d,b,!0)};function nh(a){return yd(a,function(a,c,d){if(c&&null!=Xg(c))return[Xg(c)];var e=[];c&&(e=Yg(c));v(d,function(a){e=e.concat(a)});return e})}function rh(a,b){for(var c=0;c<b.length;++c){var d=b[c];if(!T(d.m)){var d=kh(d),e=a.fc[d];delete a.fc[d];delete a.Be["_"+e]}}}
function ph(a){return T(a.m)&&!nf(a.m)?a.ub():a}function mh(a,b,c){var d=b.path,e=qh(a,b);c=oh(a,c);b=a.zc.ye(ph(b),e,c.hd,c.G);d=a.wa.subtree(d);if(e)D(null==Xg(d.value),"If we're adding a query, it shouldn't be shadowed");else for(e=yd(d,function(a,b,c){if(!a.e()&&b&&null!=Xg(b))return[Qe(Xg(b))];var d=[];b&&(d=d.concat(Aa(Yg(b),function(a){return a.V})));v(c,function(a){d=d.concat(a)});return d}),d=0;d<e.length;++d)c=e[d],a.zc.Ld(ph(c),qh(a,c));return b}
function oh(a,b){var c=b.V,d=qh(a,c);return{hd:function(){return(b.w()||L).hash()},G:function(b){if("ok"===b){if(d){var f=c.path;if(b=gh(a,d)){var g=hh(b);b=g.path;g=g.Fb;f=P(b,f);f=new Wd(new ee(!1,!0,g,!0),f);b=ih(a,b,f)}else b=[]}else b=bh(a,new Wd(fe,c.path));return b}f="Unknown Error";"too_big"===b?f="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==b?f="Client doesn't have permission to access the desired data.":"unavailable"==b&&
(f="The service is unavailable");f=Error(b+" at "+c.path.toString()+": "+f);f.code=b.toUpperCase();return a.ib(c,null,f)}}}function kh(a){return a.path.toString()+"$"+a.ja()}function hh(a){var b=a.indexOf("$");D(-1!==b&&b<a.length-1,"Bad queryKey.");return{Fb:a.substr(b+1),path:new E(a.substr(0,b))}}function gh(a,b){var c=a.Be,d="_"+b;return d in c?c[d]:void 0}function qh(a,b){var c=kh(b);return w(a.fc,c)}var lh=1;
function ih(a,b,c){var d=a.wa.get(b);D(d,"Missing sync point for query tag that we're tracking");return d.bb(c,new Ff(b,a.hb),null)}function bh(a,b){return sh(a,b,a.wa,null,new Ff(Q,a.hb))}function sh(a,b,c,d,e){if(b.path.e())return th(a,b,c,d,e);var f=c.get(Q);null==d&&null!=f&&(d=f.fb(Q));var g=[],k=K(b.path),m=b.Jc(k);if((c=c.children.get(k))&&m)var l=d?d.Q(k):null,k=e.n(k),g=g.concat(sh(a,m,c,l,k));f&&(g=g.concat(f.bb(b,e,d)));return g}
function th(a,b,c,d,e){var f=c.get(Q);null==d&&null!=f&&(d=f.fb(Q));var g=[];c.children.ha(function(c,f){var l=d?d.Q(c):null,r=e.n(c),y=b.Jc(c);y&&(g=g.concat(th(a,y,f,l,r)))});f&&(g=g.concat(f.bb(b,e,d)));return g};function Pg(a,b,c){this.app=c;var d=new yf(c);this.L=a;this.Ua=Mf(a);this.Sc=null;this.ca=new Ve;this.td=1;this.Qa=null;if(b||0<=("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))this.va=new Of(this.L,q(this.Eb,this),d),setTimeout(q(this.Gc,this,!0),0);else{b=c.options.databaseAuthVariableOverride;if("undefined"!==da(b)&&null!==b){if("object"!==da(b))throw Error("Only objects are supported for option databaseAuthVariableOverride");
try{x(b)}catch(e){throw Error("Invalid authOverride provided: "+e);}}this.va=this.Qa=new zg(this.L,q(this.Eb,this),q(this.Gc,this),q(this.se,this),d,b)}var f=this;zf(d,function(a){f.va.hf(a)});this.qg=Nf(a,q(function(){return new Gf(this.Ua,this.va)},this));this.jc=new Qc;this.fe=new xf;this.md=new $g({ye:function(a,b,c,d){b=[];c=f.fe.j(a.path);c.e()||(b=bh(f.md,new $d(fe,a.path,c)),setTimeout(function(){d("ok")},0));return b},Ld:ba});uh(this,"connected",!1);this.ia=new Db;this.Xa=new Og(this);this.cd=
0;this.ge=null;this.K=new $g({ye:function(a,b,c,d){f.va.Xe(a,c,b,function(b,c){var e=d(b,c);$e(f.ca,a.path,e)});return[]},Ld:function(a,b){f.va.tf(a,b)}})}h=Pg.prototype;h.toString=function(){return(this.L.Pc?"https://":"http://")+this.L.host};h.name=function(){return this.L.ne};function vh(a){a=a.fe.j(new E(".info/serverTimeOffset")).H()||0;return(new Date).getTime()+a}function wh(a){a=a={timestamp:vh(a)};a.timestamp=a.timestamp||(new Date).getTime();return a}
h.Eb=function(a,b,c,d){this.cd++;var e=new E(a);b=this.ge?this.ge(a,b):b;a=[];d?c?(b=Ia(b,function(a){return G(a)}),a=jh(this.K,e,b,d)):(b=G(b),a=fh(this.K,e,b,d)):c?(d=Ia(b,function(a){return G(a)}),a=eh(this.K,e,d)):(d=G(b),a=bh(this.K,new $d(fe,e,d)));d=e;0<a.length&&(d=xh(this,e));$e(this.ca,d,a)};h.Gc=function(a){uh(this,"connected",a);!1===a&&yh(this)};h.se=function(a){var b=this;$b(a,function(a,d){uh(b,d,a)})};
function uh(a,b,c){b=new E("/.info/"+b);c=G(c);var d=a.fe;d.Hd=d.Hd.F(b,c);c=bh(a.md,new $d(fe,b,c));$e(a.ca,b,c)}h.Hb=function(a,b,c,d){this.f("set",{path:a.toString(),value:b,zg:c});var e=wh(this);b=G(b,c);var e=Gb(b,e),f=this.td++,e=ah(this.K,a,e,f,!0);We(this.ca,e);var g=this;this.va.put(a.toString(),b.H(!0),function(b,c){var e="ok"===b;e||J("set at "+a+" failed: "+b);e=dh(g.K,f,!e);$e(g.ca,a,e);zh(d,b,c)});e=Ah(this,a);xh(this,e);$e(this.ca,e,[])};
h.update=function(a,b,c){this.f("update",{path:a.toString(),value:b});var d=!0,e=wh(this),f={};v(b,function(a,b){d=!1;var c=G(a);f[b]=Gb(c,e)});if(d)I("update() called with empty data.  Don't do anything."),zh(c,"ok");else{var g=this.td++,k=ch(this.K,a,f,g);We(this.ca,k);var m=this;this.va.Ye(a.toString(),b,function(b,d){var e="ok"===b;e||J("update at "+a+" failed: "+b);var e=dh(m.K,g,!e),f=a;0<e.length&&(f=xh(m,a));$e(m.ca,f,e);zh(c,b,d)});v(b,function(b,c){var d=Ah(m,a.n(c));xh(m,d)});$e(this.ca,
a,[])}};function yh(a){a.f("onDisconnectEvents");var b=wh(a),c=[];Eb(Cb(a.ia,b),Q,function(b,e){c=c.concat(bh(a.K,new $d(fe,b,e)));var f=Ah(a,b);xh(a,f)});a.ia=new Db;$e(a.ca,Q,c)}h.vd=function(a,b){var c=this;this.va.vd(a.toString(),function(d,e){"ok"===d&&Vd(c.ia,a);zh(b,d,e)})};function Bh(a,b,c,d){var e=G(c);a.va.pe(b.toString(),e.H(!0),function(c,g){"ok"===c&&Fb(a.ia,b,e);zh(d,c,g)})}
function Ch(a,b,c,d,e){var f=G(c,d);a.va.pe(b.toString(),f.H(!0),function(c,d){"ok"===c&&Fb(a.ia,b,f);zh(e,c,d)})}function Dh(a,b,c,d){var e=!0,f;for(f in c)e=!1;e?(I("onDisconnect().update() called with empty data.  Don't do anything."),zh(d,"ok")):a.va.bf(b.toString(),c,function(e,f){if("ok"===e)for(var m in c){var l=G(c[m]);Fb(a.ia,b.n(m),l)}zh(d,e,f)})}function Eh(a,b,c){c=".info"===K(b.path)?a.md.Lb(b,c):a.K.Lb(b,c);Ye(a.ca,b.path,c)}h.$a=function(){this.Qa&&this.Qa.$a("repo_interrupt")};
h.hc=function(){this.Qa&&this.Qa.hc("repo_interrupt")};h.ze=function(a){if("undefined"!==typeof console){a?(this.Sc||(this.Sc=new Hf(this.Ua)),a=this.Sc.get()):a=this.Ua.get();var b=Ba(Na(a),function(a,b){return Math.max(b.length,a)},0),c;for(c in a){for(var d=a[c],e=c.length;e<b+2;e++)c+=" ";console.log(c+d)}}};h.Ae=function(a){Jf(this.Ua,a);this.qg.qf[a]=!0};h.f=function(a){var b="";this.Qa&&(b=this.Qa.id+":");I(b,arguments)};
function zh(a,b,c){a&&cc(function(){if("ok"==b)a(null);else{var d=(b||"error").toUpperCase(),e=d;c&&(e+=": "+c);e=Error(e);e.code=d;a(e)}})};function Fh(a,b,c,d,e){function f(){}a.f("transaction on "+b);var g=new U(a,b);g.dc("value",f);c={path:b,update:c,G:d,status:null,df:Ib(),Fe:e,mf:0,Nd:function(){g.Fc("value",f)},Pd:null,Ba:null,$c:null,ad:null,bd:null};d=a.K.Aa(b,void 0)||L;c.$c=d;d=c.update(d.H());if(n(d)){Md("transaction failed: Data returned ",d,c.path);c.status=1;e=Rc(a.jc,b);var k=e.Ca()||[];k.push(c);Sc(e,k);"object"===typeof d&&null!==d&&bb(d,".priority")?(k=w(d,".priority"),D(Kd(k),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):
k=(a.K.Aa(b)||L).C().H();e=wh(a);d=G(d,k);e=Gb(d,e);c.ad=d;c.bd=e;c.Ba=a.td++;c=ah(a.K,b,e,c.Ba,c.Fe);$e(a.ca,b,c);Gh(a)}else c.Nd(),c.ad=null,c.bd=null,c.G&&(a=new V(c.$c,new U(a,c.path),H),c.G(null,!1,a))}function Gh(a,b){var c=b||a.jc;b||Hh(a,c);if(null!==c.Ca()){var d=Ih(a,c);D(0<d.length,"Sending zero length transaction queue");Ca(d,function(a){return 1===a.status})&&Jh(a,c.path(),d)}else c.gd()&&c.O(function(b){Gh(a,b)})}
function Jh(a,b,c){for(var d=Aa(c,function(a){return a.Ba}),e=a.K.Aa(b,d)||L,d=e,e=e.hash(),f=0;f<c.length;f++){var g=c[f];D(1===g.status,"tryToSendTransactionQueue_: items in queue should all be run.");g.status=2;g.mf++;var k=P(b,g.path),d=d.F(k,g.ad)}d=d.H(!0);a.va.put(b.toString(),d,function(d){a.f("transaction put response",{path:b.toString(),status:d});var e=[];if("ok"===d){d=[];for(f=0;f<c.length;f++){c[f].status=3;e=e.concat(dh(a.K,c[f].Ba));if(c[f].G){var g=c[f].bd,k=new U(a,c[f].path);d.push(q(c[f].G,
null,null,!0,new V(g,k,H)))}c[f].Nd()}Hh(a,Rc(a.jc,b));Gh(a);$e(a.ca,b,e);for(f=0;f<d.length;f++)cc(d[f])}else{if("datastale"===d)for(f=0;f<c.length;f++)c[f].status=4===c[f].status?5:1;else for(J("transaction at "+b.toString()+" failed: "+d),f=0;f<c.length;f++)c[f].status=5,c[f].Pd=d;xh(a,b)}},e)}function xh(a,b){var c=Kh(a,b),d=c.path(),c=Ih(a,c);Lh(a,c,d);return d}
function Lh(a,b,c){if(0!==b.length){for(var d=[],e=[],f=za(b,function(a){return 1===a.status}),f=Aa(f,function(a){return a.Ba}),g=0;g<b.length;g++){var k=b[g],m=P(c,k.path),l=!1,r;D(null!==m,"rerunTransactionsUnderNode_: relativePath should not be null.");if(5===k.status)l=!0,r=k.Pd,e=e.concat(dh(a.K,k.Ba,!0));else if(1===k.status)if(25<=k.mf)l=!0,r="maxretry",e=e.concat(dh(a.K,k.Ba,!0));else{var y=a.K.Aa(k.path,f)||L;k.$c=y;var F=b[g].update(y.H());n(F)?(Md("transaction failed: Data returned ",F,
k.path),m=G(F),"object"===typeof F&&null!=F&&bb(F,".priority")||(m=m.fa(y.C())),y=k.Ba,F=wh(a),F=Gb(m,F),k.ad=m,k.bd=F,k.Ba=a.td++,Fa(f,y),e=e.concat(ah(a.K,k.path,F,k.Ba,k.Fe)),e=e.concat(dh(a.K,y,!0))):(l=!0,r="nodata",e=e.concat(dh(a.K,k.Ba,!0)))}$e(a.ca,c,e);e=[];l&&(b[g].status=3,setTimeout(b[g].Nd,Math.floor(0)),b[g].G&&("nodata"===r?(k=new U(a,b[g].path),d.push(q(b[g].G,null,null,!1,new V(b[g].$c,k,H)))):d.push(q(b[g].G,null,Error(r),!1,null))))}Hh(a,a.jc);for(g=0;g<d.length;g++)cc(d[g]);Gh(a)}}
function Kh(a,b){for(var c,d=a.jc;null!==(c=K(b))&&null===d.Ca();)d=Rc(d,c),b=N(b);return d}function Ih(a,b){var c=[];Mh(a,b,c);c.sort(function(a,b){return a.df-b.df});return c}function Mh(a,b,c){var d=b.Ca();if(null!==d)for(var e=0;e<d.length;e++)c.push(d[e]);b.O(function(b){Mh(a,b,c)})}function Hh(a,b){var c=b.Ca();if(c){for(var d=0,e=0;e<c.length;e++)3!==c[e].status&&(c[d]=c[e],d++);c.length=d;Sc(b,0<c.length?c:null)}b.O(function(b){Hh(a,b)})}
function Ah(a,b){var c=Kh(a,b).path(),d=Rc(a.jc,b);Vc(d,function(b){Nh(a,b)});Nh(a,d);Uc(d,function(b){Nh(a,b)});return c}
function Nh(a,b){var c=b.Ca();if(null!==c){for(var d=[],e=[],f=-1,g=0;g<c.length;g++)4!==c[g].status&&(2===c[g].status?(D(f===g-1,"All SENT items should be at beginning of queue."),f=g,c[g].status=4,c[g].Pd="set"):(D(1===c[g].status,"Unexpected transaction status in abort"),c[g].Nd(),e=e.concat(dh(a.K,c[g].Ba,!0)),c[g].G&&d.push(q(c[g].G,null,Error("set"),!1,null))));-1===f?Sc(b,null):c.length=f+1;$e(a.ca,b.path(),e);for(g=0;g<d.length;g++)cc(d[g])}};function Tg(){this.jb={};this.uf=!1}Tg.prototype.$a=function(){for(var a in this.jb)this.jb[a].$a()};Tg.prototype.hc=function(){for(var a in this.jb)this.jb[a].hc()};Tg.prototype.$d=function(a){this.uf=a};ca(Tg);Tg.prototype.interrupt=Tg.prototype.$a;Tg.prototype.resume=Tg.prototype.hc;var W={};W.kc=zg;W.DataConnection=W.kc;zg.prototype.pg=function(a,b){this.ua("q",{p:a},b)};W.kc.prototype.simpleListen=W.kc.prototype.pg;zg.prototype.If=function(a,b){this.ua("echo",{d:a},b)};W.kc.prototype.echo=W.kc.prototype.If;zg.prototype.interrupt=zg.prototype.$a;W.yf=ng;W.RealTimeConnection=W.yf;ng.prototype.sendRequest=ng.prototype.ua;ng.prototype.close=ng.prototype.close;
W.Tf=function(a){var b=zg.prototype.put;zg.prototype.put=function(c,d,e,f){n(f)&&(f=a());b.call(this,c,d,e,f)};return function(){zg.prototype.put=b}};W.hijackHash=W.Tf;W.xf=wb;W.ConnectionTarget=W.xf;W.ja=function(a){return a.ja()};W.queryIdentifier=W.ja;W.Wf=function(a){return a.u.Qa.$};W.listens=W.Wf;W.$d=function(a){Tg.Tb().$d(a)};W.forceRestClient=W.$d;W.Context=Tg;function Oh(a,b){this.committed=a;this.snapshot=b};function X(a,b,c,d){this.u=a;this.path=b;this.m=c;this.Kc=d}
function Ph(a){var b=null,c=null;a.ka&&(b=cf(a));a.na&&(c=ef(a));if(a.g===qc){if(a.ka){if("[MIN_NAME]"!=bf(a))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if("string"!==typeof b)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.");}if(a.na){if("[MAX_NAME]"!=df(a))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if("string"!==
typeof c)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.");}}else if(a.g===H){if(null!=b&&!Kd(b)||null!=c&&!Kd(c))throw Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).");}else if(D(a.g instanceof mc||a.g===tc,"unknown index type."),null!=b&&"object"===typeof b||null!=c&&"object"===typeof c)throw Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.");
}function Qh(a){if(a.ka&&a.na&&a.xa&&(!a.xa||""===a.kb))throw Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.");}function Rh(a,b){if(!0===a.Kc)throw Error(b+": You can't combine multiple orderBy calls.");}h=X.prototype;h.ub=function(){z("Query.ref",0,0,arguments.length);return new U(this.u,this.path)};
h.dc=function(a,b,c,d){z("Query.on",2,4,arguments.length);Qd("Query.on",a,!1);B("Query.on",2,b,!1);var e=Sh("Query.on",c,d);if("value"===a)Eh(this.u,this,new Ug(b,e.cancel||null,e.La||null));else{var f={};f[a]=b;Eh(this.u,this,new Vg(f,e.cancel,e.La))}return b};
h.Fc=function(a,b,c){z("Query.off",0,3,arguments.length);Qd("Query.off",a,!0);B("Query.off",2,b,!0);lb("Query.off",3,c);var d=null,e=null;"value"===a?d=new Ug(b||null,null,c||null):a&&(b&&(e={},e[a]=b),d=new Vg(e,null,c||null));e=this.u;d=".info"===K(this.path)?e.md.ib(this,d):e.K.ib(this,d);Ye(e.ca,this.path,d)};
h.ag=function(a,b){function c(k){f&&(f=!1,e.Fc(a,c),b&&b.call(d.La,k),g.resolve(k))}z("Query.once",1,4,arguments.length);Qd("Query.once",a,!1);B("Query.once",2,b,!0);var d=Sh("Query.once",arguments[2],arguments[3]),e=this,f=!0,g=new fb;hb(g.ra);this.dc(a,c,function(b){e.Fc(a,c);d.cancel&&d.cancel.call(d.La,b);g.reject(b)});return g.ra};
h.ke=function(a){z("Query.limitToFirst",1,1,arguments.length);if(!ga(a)||Math.floor(a)!==a||0>=a)throw Error("Query.limitToFirst: First argument must be a positive integer.");if(this.m.xa)throw Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new X(this.u,this.path,this.m.ke(a),this.Kc)};
h.le=function(a){z("Query.limitToLast",1,1,arguments.length);if(!ga(a)||Math.floor(a)!==a||0>=a)throw Error("Query.limitToLast: First argument must be a positive integer.");if(this.m.xa)throw Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new X(this.u,this.path,this.m.le(a),this.Kc)};
h.bg=function(a){z("Query.orderByChild",1,1,arguments.length);if("$key"===a)throw Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===a)throw Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===a)throw Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Sd("Query.orderByChild",a);Rh(this,"Query.orderByChild");var b=new E(a);if(b.e())throw Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");
b=new mc(b);b=lf(this.m,b);Ph(b);return new X(this.u,this.path,b,!0)};h.cg=function(){z("Query.orderByKey",0,0,arguments.length);Rh(this,"Query.orderByKey");var a=lf(this.m,qc);Ph(a);return new X(this.u,this.path,a,!0)};h.dg=function(){z("Query.orderByPriority",0,0,arguments.length);Rh(this,"Query.orderByPriority");var a=lf(this.m,H);Ph(a);return new X(this.u,this.path,a,!0)};
h.eg=function(){z("Query.orderByValue",0,0,arguments.length);Rh(this,"Query.orderByValue");var a=lf(this.m,tc);Ph(a);return new X(this.u,this.path,a,!0)};h.Kd=function(a,b){z("Query.startAt",0,2,arguments.length);Ld("Query.startAt",a,this.path,!0);Rd("Query.startAt",b);var c=this.m.Kd(a,b);Qh(c);Ph(c);if(this.m.ka)throw Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");n(a)||(b=a=null);return new X(this.u,this.path,c,this.Kc)};
h.dd=function(a,b){z("Query.endAt",0,2,arguments.length);Ld("Query.endAt",a,this.path,!0);Rd("Query.endAt",b);var c=this.m.dd(a,b);Qh(c);Ph(c);if(this.m.na)throw Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new X(this.u,this.path,c,this.Kc)};
h.Jf=function(a,b){z("Query.equalTo",1,2,arguments.length);Ld("Query.equalTo",a,this.path,!1);Rd("Query.equalTo",b);if(this.m.ka)throw Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.m.na)throw Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.Kd(a,b).dd(a,b)};
h.toString=function(){z("Query.toString",0,0,arguments.length);for(var a=this.path,b="",c=a.Y;c<a.o.length;c++)""!==a.o[c]&&(b+="/"+encodeURIComponent(String(a.o[c])));return this.u.toString()+(b||"/")};h.toJSON=function(){z("Query.toJSON",0,1,arguments.length);return this.toString()};h.ja=function(){var a=Yb(mf(this.m));return"{}"===a?"default":a};
h.isEqual=function(a){z("Query.isEqual",1,1,arguments.length);if(!(a instanceof X))throw Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var b=this.u===a.u,c=this.path.Z(a.path),d=this.ja()===a.ja();return b&&c&&d};
function Sh(a,b,c){var d={cancel:null,La:null};if(b&&c)d.cancel=b,B(a,3,d.cancel,!0),d.La=c,lb(a,4,d.La);else if(b)if("object"===typeof b&&null!==b)d.La=b;else if("function"===typeof b)d.cancel=b;else throw Error(A(a,3,!0)+" must either be a cancel callback or a context object.");return d}X.prototype.on=X.prototype.dc;X.prototype.off=X.prototype.Fc;X.prototype.once=X.prototype.ag;X.prototype.limitToFirst=X.prototype.ke;X.prototype.limitToLast=X.prototype.le;X.prototype.orderByChild=X.prototype.bg;
X.prototype.orderByKey=X.prototype.cg;X.prototype.orderByPriority=X.prototype.dg;X.prototype.orderByValue=X.prototype.eg;X.prototype.startAt=X.prototype.Kd;X.prototype.endAt=X.prototype.dd;X.prototype.equalTo=X.prototype.Jf;X.prototype.toString=X.prototype.toString;X.prototype.isEqual=X.prototype.isEqual;dc(X.prototype,"ref",X.prototype.ub);function Y(a,b){this.ta=a;this.qa=b}Y.prototype.cancel=function(a){z("Firebase.onDisconnect().cancel",0,1,arguments.length);B("Firebase.onDisconnect().cancel",1,a,!0);var b=new fb;this.ta.vd(this.qa,gb(b,a));return b.ra};Y.prototype.cancel=Y.prototype.cancel;Y.prototype.remove=function(a){z("Firebase.onDisconnect().remove",0,1,arguments.length);Td("Firebase.onDisconnect().remove",this.qa);B("Firebase.onDisconnect().remove",1,a,!0);var b=new fb;Bh(this.ta,this.qa,null,gb(b,a));return b.ra};
Y.prototype.remove=Y.prototype.remove;Y.prototype.set=function(a,b){z("Firebase.onDisconnect().set",1,2,arguments.length);Td("Firebase.onDisconnect().set",this.qa);Ld("Firebase.onDisconnect().set",a,this.qa,!1);B("Firebase.onDisconnect().set",2,b,!0);var c=new fb;Bh(this.ta,this.qa,a,gb(c,b));return c.ra};Y.prototype.set=Y.prototype.set;
Y.prototype.Hb=function(a,b,c){z("Firebase.onDisconnect().setWithPriority",2,3,arguments.length);Td("Firebase.onDisconnect().setWithPriority",this.qa);Ld("Firebase.onDisconnect().setWithPriority",a,this.qa,!1);Pd("Firebase.onDisconnect().setWithPriority",2,b);B("Firebase.onDisconnect().setWithPriority",3,c,!0);var d=new fb;Ch(this.ta,this.qa,a,b,gb(d,c));return d.ra};Y.prototype.setWithPriority=Y.prototype.Hb;
Y.prototype.update=function(a,b){z("Firebase.onDisconnect().update",1,2,arguments.length);Td("Firebase.onDisconnect().update",this.qa);if(ea(a)){for(var c={},d=0;d<a.length;++d)c[""+d]=a[d];a=c;J("Passing an Array to Firebase.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Od("Firebase.onDisconnect().update",a,this.qa);B("Firebase.onDisconnect().update",2,b,!0);
c=new fb;Dh(this.ta,this.qa,a,gb(c,b));return c.ra};Y.prototype.update=Y.prototype.update;var Z={Of:function(){ag=Wf=!0}};Z.forceLongPolling=Z.Of;Z.Pf=function(){bg=!0};Z.forceWebSockets=Z.Pf;Z.Vf=function(){return Vf.isAvailable()};Z.isWebSocketsAvailable=Z.Vf;Z.ng=function(a,b){a.u.Qa.xe=b};Z.setSecurityDebugCallback=Z.ng;Z.ze=function(a,b){a.u.ze(b)};Z.stats=Z.ze;Z.Ae=function(a,b){a.u.Ae(b)};Z.statsIncrementCounter=Z.Ae;Z.cd=function(a){return a.u.cd};Z.dataUpdateCount=Z.cd;Z.Uf=function(a,b){a.u.ge=b};Z.interceptServerData=Z.Uf;function U(a,b){if(!(a instanceof Pg))throw Error("new Firebase() no longer supported - use app.database().");X.call(this,a,b,jf,!1);this.then=void 0;this["catch"]=void 0}la(U,X);h=U.prototype;h.getKey=function(){z("Firebase.key",0,0,arguments.length);return this.path.e()?null:Lc(this.path)};
h.n=function(a){z("Firebase.child",1,1,arguments.length);if(ga(a))a=String(a);else if(!(a instanceof E))if(null===K(this.path)){var b=a;b&&(b=b.replace(/^\/*\.info(\/|$)/,"/"));Sd("Firebase.child",b)}else Sd("Firebase.child",a);return new U(this.u,this.path.n(a))};h.getParent=function(){z("Firebase.parent",0,0,arguments.length);var a=this.path.parent();return null===a?null:new U(this.u,a)};
h.Qf=function(){z("Firebase.ref",0,0,arguments.length);for(var a=this;null!==a.getParent();)a=a.getParent();return a};h.Gf=function(){return this.u.Xa};h.set=function(a,b){z("Firebase.set",1,2,arguments.length);Td("Firebase.set",this.path);Ld("Firebase.set",a,this.path,!1);B("Firebase.set",2,b,!0);var c=new fb;this.u.Hb(this.path,a,null,gb(c,b));return c.ra};
h.update=function(a,b){z("Firebase.update",1,2,arguments.length);Td("Firebase.update",this.path);if(ea(a)){for(var c={},d=0;d<a.length;++d)c[""+d]=a[d];a=c;J("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Od("Firebase.update",a,this.path);B("Firebase.update",2,b,!0);c=new fb;this.u.update(this.path,a,gb(c,b));return c.ra};
h.Hb=function(a,b,c){z("Firebase.setWithPriority",2,3,arguments.length);Td("Firebase.setWithPriority",this.path);Ld("Firebase.setWithPriority",a,this.path,!1);Pd("Firebase.setWithPriority",2,b);B("Firebase.setWithPriority",3,c,!0);if(".length"===this.getKey()||".keys"===this.getKey())throw"Firebase.setWithPriority failed: "+this.getKey()+" is a read-only object.";var d=new fb;this.u.Hb(this.path,a,b,gb(d,c));return d.ra};
h.remove=function(a){z("Firebase.remove",0,1,arguments.length);Td("Firebase.remove",this.path);B("Firebase.remove",1,a,!0);return this.set(null,a)};
h.transaction=function(a,b,c){z("Firebase.transaction",1,3,arguments.length);Td("Firebase.transaction",this.path);B("Firebase.transaction",1,a,!1);B("Firebase.transaction",2,b,!0);if(n(c)&&"boolean"!=typeof c)throw Error(A("Firebase.transaction",3,!0)+"must be a boolean.");if(".length"===this.getKey()||".keys"===this.getKey())throw"Firebase.transaction failed: "+this.getKey()+" is a read-only object.";"undefined"===typeof c&&(c=!0);var d=new fb;ha(b)&&hb(d.ra);Fh(this.u,this.path,a,function(a,c,g){a?
d.reject(a):d.resolve(new Oh(c,g));ha(b)&&b(a,c,g)},c);return d.ra};h.mg=function(a,b){z("Firebase.setPriority",1,2,arguments.length);Td("Firebase.setPriority",this.path);Pd("Firebase.setPriority",1,a);B("Firebase.setPriority",2,b,!0);var c=new fb;this.u.Hb(this.path.n(".priority"),a,null,gb(c,b));return c.ra};
h.push=function(a,b){z("Firebase.push",0,2,arguments.length);Td("Firebase.push",this.path);Ld("Firebase.push",a,this.path,!0);B("Firebase.push",2,b,!0);var c=vh(this.u),d=Hc(c),c=this.n(d),e=this.n(d),d=null!=a?c.set(a,b).then(function(){return e}):eb.resolve(e);c.then=q(d.then,d);c["catch"]=q(d.then,d,void 0);ha(b)&&hb(d);return c};h.gb=function(){Td("Firebase.onDisconnect",this.path);return new Y(this.u,this.path)};U.prototype.child=U.prototype.n;U.prototype.set=U.prototype.set;
U.prototype.update=U.prototype.update;U.prototype.setWithPriority=U.prototype.Hb;U.prototype.remove=U.prototype.remove;U.prototype.transaction=U.prototype.transaction;U.prototype.setPriority=U.prototype.mg;U.prototype.push=U.prototype.push;U.prototype.onDisconnect=U.prototype.gb;dc(U.prototype,"database",U.prototype.Gf);dc(U.prototype,"key",U.prototype.getKey);dc(U.prototype,"parent",U.prototype.getParent);dc(U.prototype,"root",U.prototype.Qf);if("undefined"===typeof firebase)throw Error("Cannot install Firebase Database - be sure to load firebase-app.js first.");
try{var Th=firebase.INTERNAL.registerService("database",function(a){var b=Tg.Tb(),c=a.options.databaseURL;n(c)||Sb("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.intializeApp().");var d=Tb(c),c=d.gc;Ud("Invalid Firebase Database URL",d);d.path.e()||Sb("Database URL must point to the root of a Firebase Database (not including a child path).");(d=w(b.jb,a.name))&&Sb("FIREBASE INTERNAL ERROR: Database initialized multiple times.");d=new Pg(c,b.uf,
a);b.jb[a.name]=d;return d.Xa},{Reference:U,Query:X,Database:Og,enableLogging:Pb,INTERNAL:Z,TEST_ACCESS:W,ServerValue:Rg});module.exports=Th}catch(Uh){Sb("Failed to register the Firebase Database Service ("+Uh+")")};
})();

